# 进销存系统软件详细设计描述文档

#### V1.1正式版

# 更新历史

------

| **修改人员** | **日期**    | **变更原因**     | **版本号**   |
| -------- | --------- | ------------ | --------- |
| 全体人员     | 2017-11-3 | 最初草稿         | V1.0  草稿  |
| 石胜杰      | 2017-11-7 | 细化了bill模块的接口 | V1.0  正式版 |
| 刘苏豫      | 2018-1-4  | 细化接口         | V1.1正式版   |

------



##1.引言

###1.1编制目的

本报告详细完成对进销存系统的详细设计，达到指导后后续软件构造的目的。同时实现和测试人员及用户的沟通。

本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。

###1.2词汇表

| 词汇名称        | 词汇含义             | 备注   |
| ----------- | ---------------- | ---- |
| *ui         | 表示某展示层           |      |
| *bl         | 表示某逻辑层           |      |
| *data       | 表示某数据层           |      |
| RMI         | 表示远程方法调用         |      |
| utilitybl   | 表示初始化和业务逻辑上下文的工作 |      |
| datafactory | 表示调用其它数据库的方法     |      |

###1.3参考资料

1.IEEE std 1471-2000

2.丁二玉，刘钦.计算与软件工程（卷二）[M]机械工业出版2012，134—182

##2.产品概述

参考进销存系统用例文档和进销存系统需求规格说明文档中对产品的概括描述。

##3.体系结构设计概述

参考进销存系统概要设计文档中对体系结构设计的概述。

##4.结构视角

###4.1业务逻辑的分解

业务逻辑层的开发包图参见软件体系结构文档图。




####4.1.1 memberbl模块

#####4.1.1.1模块概述

memberbl模块承担的需求参见需求规格说明文档，功能需求及相关非功能需求参见需求规格说明文档。

Member模块的职责及接口参见软件系统结构描述文档表

#####4.1.1.2整体结构

根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口，比如展示层和业务逻辑层之间我们添加businesslogicservice.memberblservice.MemberBLService接口.业务逻辑层和数据层之间添加dataservice.memberdataservice.MemberDataService接口。为隔离业务逻辑职责和逻辑控制职责，我们增加了MenberController，这样MemberController会将对销售的业务逻辑处理委托给Member对象。MemberPO是作为销售记录的持久化对象被添加到设计模型中去的。

memberbl模块的设计如图。

![](memberbl模块设计.png)



memberbl模块各个类的职责如表所示。

| 模块               | 职责                                       |
| ---------------- | ---------------------------------------- |
| MemberController | 负责实现客户管理界面做需要的服务                         |
| Member           | 客户管理领域的模型对象，拥有一次客户管理操作所持有的客户姓名，等级信息，可以帮助完成客户管理界面所需要的服务。 |

#####4.1.1.3模块内部类的接口规范

#####MemberController 的接口规范

提供的服务（供接口）

MemberController.addMember

| 语法   | public boolean addMember(MemberVO vo) |
| ---- | ------------------------------------- |
| 前置条件 | 已创建一个Member对象，并且输入符合输入规则              |
| 后置条件 | 调用Member对象的addMember方法                |



MemberController.findMember

| 语法   | public MemberVO findMemberByName(String name) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个Member对象，并且输入符合输入规则                 |
| 后置条件 | 调用Member对象的findMember方法                  |



MemberController.deleteMember

| 语法   | public boolean deleteMember(MemberVO a); |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个Member对象，并且输入符合输入规则                 |
| 后置条件 | 调用Member对象的deleteMember方法                |



MemberController.updateMember

| 语法   | public boolean updateMember(MemberVO a) |
| ---- | --------------------------------------- |
| 前置条件 | 已创建一个Member对象，并且输入符合输入规则                |
| 后置条件 | 调用Member对象的updateMember方法               |



MemberController.findMembersByField

| 语法   | public ArrayList<MemberVO> findMembersByField(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一群Member对象                            |
| 后置条件 | 调用Member对象的findMembersByField方法          |



MemberController.toMemberVO

| 语法   | public MemberVO toMemberVO(MemberPO memberPO) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个Member对象                            |
| 后置条件 | 调用Member对象的toMemberVO方法                  |



MemberController.findMembers

| 语法   | public ArrayList<MemberVO> findMembers() |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建Member对象                              |
| 后置条件 | 调用Member对象的findMembers方法                 |



MemberController.findMemberByID

| 语法   | public MemberVO findMemberByID(long id) |
| ---- | --------------------------------------- |
| 前置条件 | 已创建一个Member对象，且输入符合输入规则                 |
| 后置条件 | 调用Member对象的findMemberByID方法             |



需要的服务（需接口） 

| 服务名                                     | 服务                   |
| --------------------------------------- | -------------------- |
| Member.addMember(MemberVO )             | 加入一个客户对象             |
| Member.findMember(String field,int id)  | 查找一个客户对象             |
| Member.deleteMember(MemberVO vo)        | 删除一个客户对象             |
| Member.updateMember(MemberVO vo)        | 维护一个客户对象             |
| Member.findMembersByField(String field) | 根据范围查找对象             |
| Member.toMemberVO(MemberPO memberPO)    | 把MemberPO转化为MemberVO |
| Member.findMembers()                    | 查找用户群                |
| Member.findMemberByID(long id)          | 根据ID查找用户             |

#####Member的接口规范



提供的服务（供接口）

Member.addMember

| 语法   | public MemberVO addmember (MemberVO a) |
| ---- | -------------------------------------- |
| 前置条件 | 进货销售人员已登录                              |
| 后置条件 | 增添一个客户信息                               |

Member.deleteMember

| 语法   | public MemberVO deletemember (MemberVO a) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 删除一个客户信息                                 |

Member.findMember

| 语法   | public MemberVO findmember (MemberVO a) |
| ---- | --------------------------------------- |
| 前置条件 | 输入的关键词正确，进货销售人员已登录                      |
| 后置条件 | 显示查询客户的信息                               |

Member.updateMember

| 语法   | public MemberVO findmember (MemberVO a) |
| ---- | --------------------------------------- |
| 前置条件 | 此客户存在，进货销售人员已登录                         |
| 后置条件 | 更改客户的信息                                 |

Member.findMembersByField

| 语法   | public ArrayList<MemberVO> findMembersByField(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 此客户存在，进货销售人员已登录                          |
| 后置条件 | 根据范围查找对象                                 |



Member.toMemberVO

| 语法   | public MemberVO toMemberVO(MemberPO memberPO) |
| ---- | ---------------------------------------- |
| 前置条件 | MemberVO存在                               |
| 后置条件 | 把MemberPO转化为MemberVO                     |



Member.findMembers

| 语法   | public ArrayList<MemberVO> findMembers() |
| ---- | ---------------------------------------- |
| 前置条件 | 此客户群存在，进货销售人员已登录                         |
| 后置条件 | 查找用户群                                    |



Member.findMemberByID

| 语法   | public MemberVO findMemberByID(long id) |
| ---- | --------------------------------------- |
| 前置条件 | 此客户ID存在，用户已登录                           |
| 后置条件 | 根据ID查找用户                                |



需要的服务（需接口）

| 服务名                                      | 服务                |
| ---------------------------------------- | ----------------- |
| MemberDataService.findMemberbyName(String name) | 根据客户姓名进行查找单一持久化对象 |
| MemberDataService.findMembers()          | 根据字段名和值查找多个持久化对象  |
| MemberDataService.findMemberbyID(long id) | 根据客户ID进行查找单一持久化对象 |
| MemberDataService.findMembersbyField(String field) | 根据字段名查找多个持久化对象    |
| MemberDataService.update(MemberPO po)    | 更新单一持久化对象         |
| MemberDataService.delete(MemberPO po)    | 得到Member数据库的服务的引用 |
| MemberDataService.insert(MemberPO po)    | 在数据库中插入MemberPO对象 |

(4) 业务逻辑层的动态模型

如图是增加客户的顺序图

![](管理客户_增加客户顺序图.png)

删除客户信息的顺序图

![](管理客户_删除客户顺序图.png)

查找并获得客户信息的顺序图



![](管理客户_查找客户顺序图.png)

维护客户的顺序图参照添加客户

获取客户列表的顺序图参照获取客户信息

（5）业务逻辑层的设计原理

​	利用了委托式的控制风格，每个界面需要访问的业务逻辑由各自的控制器委托给不同的领域对象。

####4.1.2 tablebl模块

#####4.1.2.1模块概述

tablebl模块承担的需求参见需求规格说明文档，功能需求及相关非功能需求参见需求规格说明文档。

Table模块的职责及接口参见软件系统结构描述文档表

#####4.1.2.2整体结构

根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口，比如展示层和业务逻辑层之间我们添加businesslogicservice.tableblservice.TableBLService接口.业务逻辑层和数据层之间添加dataservice.tabledataservice.TableDataService接口。为隔离业务逻辑职责和逻辑控制职责，我们增加了TableController，这样TableController会将对销售的业务逻辑处理委托给Table对象。TablePO是作为销售记录的持久化对象被添加到设计模型中去的。

tablebl模块的设计如图。

![](tablebl模块设计.png)



tablebl模块各个类的职责如表所示。

| 模块              | 职责                                       |
| --------------- | ---------------------------------------- |
| TableController | 负责实现表格查看界面所需要的服务                         |
| Table           | 表格的领域对象模型，拥有一次表个插卡所持有的各类表单的引用，可以帮助完成表格查看界面所需要的服务 |

#####4.1.2.3模块内部类的接口规范

#####TableController的接口规范

提供的服务（供接口）

TableController.getSaleDetails

| 语法   | public SaleDetailsTableVO getSaleDetails(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个Table领域对象，并且输入符合输入规范                |
| 后置条件 | 调用Table领域对象的getSaleDetails方法             |



TableController.getOperateCondition

| 语法   | public OperateConditionTableVO getOperateCondition(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个Table领域对象，并且输入符合输入规范                |
| 后置条件 | 调用Table领域对象的getOperateCondition方法        |



TableController.getOperateCourse

| 语法   | public ArrayList<BillVO> getOperateCourse(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个Table领域对象，并且输入符合输入规范                |
| 后置条件 | 调用Table领域对象的getOperateCourse方法           |



TableController.Red

| 语法   | public void Red(String id,String Note) |
| ---- | -------------------------------------- |
| 前置条件 | 已创建一个Table领域对象，并且输入符合输入规范              |
| 后置条件 | 调用Table领域对象的Red方法                      |





需要的服务（需接口）

| 服务名                       | 服务          |
| ------------------------- | ----------- |
| Table.getSaleDetails      | 获得销售记录      |
| Table.getOperateCondition | 获得经营情况表     |
| Table.getOperateCour      | 获得所有符合条件的单据 |
| Table.Red                 | 进行单据红冲      |



（4）业务逻辑层的动态设计模型

如图是查看销售明细表的顺序图

![](查看销售明细表顺序图.png)

红冲顺序图

![](红冲顺序图.png)

查看经营情况表和经营明细表的顺序图参照销售明细表。

####4.2.3commoditybl模块

#####4.2.3.1模块概述

commodityebl模块承担的需求参见需求规格说明文档，功能需求及相关非功能需求参见需求规格说明文档。

Commodity模块的职责及接口参见软件系统结构描述文档表

#####4.2.3.2整体结构

根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口，比如展示层和业务逻辑层之间我们添加businesslogicservice.commodityblservice.CommodityBLService接口.业务逻辑层和数据层之间添加dataservice.commoditydataservice.CommodityDataService接口。为隔离业务逻辑职责和逻辑控制职责，我们增加了CommodityController，这样CommodityController会将对销售的业务逻辑处理委托给Commodity对象。CommodityPO是作为销售记录的持久化对象被添加到设计模型中去的。

commoditybl模块的设计如图。

![](commoditybl模块设计.png)

commoditybl模块各个类的职责如表所示。
commoditybl模块各个类的职责
| CommodityController | 负责实现商品界面所需要的服务                           |
| ------------------- | ---------------------------------------- |
| Commodity           | 商品的领域模型对象，拥有分类，商品价格，名称，库存数量等信息，可以帮助实现商品界面所需要的服务 |
| Category            | 商品分类的领域模型对象，拥有分类，子类，名称等信息，可以帮助完成实现商品界面所需要的服务 |
#####4.2.3.3模块内部类的接口规范

#####CommodityController的接口规范

CommodityController.findCommodityByField

| 语法   | public ArrayList<CommodityVO> findCommodityByField(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个commodity领域对象，并且输入正确                |
| 后置条件 | 调用commodity领域对象的findCommodityByField方法   |

CommodityController.findCommodityByName

| 语法   | public CommodityVO findCommodityByName(String name) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个commodity领域对象，并且输入正确                |
| 后置条件 | 调用commodity领域对象的findCommodityByName方法    |

CommodityController.findCommodityByID

| 语法   | public CommodityVO findCommodityByID(long id) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个commodity领域对象，并且输入正确                |
| 后置条件 | 调用commodity领域对象的findCommodityByID方法      |

CommodityController.findCommodities

| 语法   | public ArrayList<CommodityVO> findCommodities() |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个commodity领域对象，并且输入正确                |
| 后置条件 | 调用commodity领域对象的findCommodities方法        |

CommodityController.toCommodityVO

| 语法   | public CommodityVO toCommodityVO(CommodityPO commodityPO) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个commodity领域对象，并且输入正确                |
| 后置条件 | 调用commodity领域对象的toCommodityVO方法          |

CommodityController.findDownCommodity

| 语法   | public ArrayList<CommodityVO> findDownCommodity(CategoryVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建commodity领域对象，并且输入正确                  |
| 后置条件 | 调用commodity领域对象的findDownCommodity方法      |



CommodityController.addCommodity

| 语法   | public boolean addCommodity(CommodityVO commodityVO) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个commodity领域对象，并且输入正确                |
| 后置条件 | 调用commodity领域对象的addCommodity方法           |

CommodityController.deleteCommodity
| 语法   | public boolean deleteCommodity(CommodityVO commodityVO) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个commodity领域对象，并且输入正确                |
| 后置条件 | 调用commodity领域对象的deleteCommodity方法        |


CommodityController.updateCommodity

| 语法   | public boolean updateCommodity(CommodityVO commodityVO) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个commodity领域对象，并且输入正确                |
| 后置条件 | 调用commodity领域对象的updateCommodity方法        |


CommodityController.findCategoryByName

| 语法   | public CategoryVO findCategoryByName(String name); |
| ---- | ---------------------------------------- |
| 前置条件 | 根据类别名查找已创建一个commodity领域对象，并且输入正确         |
| 后置条件 | 调用commodity领域对象的findCategoryByName方法     |
CommodityController.findCategoryByID

| 语法   | public CategoryVO findCategoryByID(long id); |
| ---- | ---------------------------------------- |
| 前置条件 | 根据ID查找已创建一个commodity领域对象，并且输入正确          |
| 后置条件 | 调用commodity领域对象的findCategoryByID方法       |

CommodityController.addCategory

| 语法   | public boolean addCategory(CategoryVO categoryVO) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个category领域对象，并且输入正确                 |
| 后置条件 | 调用category领域对象的addcategory方法             |
CommodityController.deleteCategory

| 语法   | public boolean deleteCategory(CategoryVO categoryVO) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个category领域对象，并且输入正确                 |
| 后置条件 | 调用category领域对象的deletecategory方法          |
CommodityController.updateCategory

| 语法   | public boolean updateCategory(CategoryVO categoryVO) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个category领域对象，并且输入正确                 |
| 后置条件 | 调用category领域对象的updateCategory方法          |
CommodityController.toCategoryVO

| 语法   | public CategoryVO toCategoryVO(CategoryPO categoryPO) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个category领域对象，并且输入正确                 |
| 后置条件 | 调用category领域对象的toCategoryVO方法            |

CommodityController.findUpCategory

| 语法   | public ArrayList<CategoryVO> findUpCategory(CategoryVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个category领域对象，并且输入正确                 |
| 后置条件 | 调用category领域对象的findUpCategory方法          |

CommodityController.findDownCategory

| 语法   | public ArrayList<CategoryVO> findDownCategory(CategoryVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个category领域对象，并且输入正确                 |
| 后置条件 | 调用category领域对象的findDownCategory方法        |

CommodityController.getStockInfo

| 语法   | public ArrayList<StockCheckInfoVO> getStockInfo(Date start,Date end) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建库存信息，并且输入正确                           |
| 后置条件 | 调用category领域对象的getStockInfo方法            |

CommodityController.getInventoryInfo

| 语法   | public ArrayList<StockInventoryInfoVO> getInventoryInfo() |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建库存信息，并且输入正确                           |
| 后置条件 | 调用category领域对象的getInventoryInfo方法        |

CommodityController.findLargestIDofCommodity

| 语法   | public long findLargestIDofCommodity()   |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个category领域对象，并且输入正确                 |
| 后置条件 | 调用category领域对象的findLargestIDofCommodity方法 |

CommodityController.findLargestIDofCategory

| 语法   | public long findLargestIDofCategory()    |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个category领域对象，并且输入正确                 |
| 后置条件 | 调用category领域对象的findLargestIDofCategory方法 |



#####Commodity的接口规范

Commodity.findLargestIDofCommodity

| 语法   | public long findLargestIDofCommodity() |
| ---- | -------------------------------------- |
| 前置条件 | 选择进入商品管理界面，库存管理人员已登录                   |
| 后置条件 | 返回商品列表信息                               |

Commodity.findCommodityByField

| 语法   | public ArrayList<CommodityPO> findCommoditybyField(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 根据输入的范围查找商品，库存管理人员已登录                    |
| 后置条件 | 从数据库中查找单一持久化对象，返回维护结果                    |

Commodity.findCommodityByName

| 语法   | public CommodityVO findCommoditybyName(String name) |
| ---- | ---------------------------------------- |
| 前置条件 | 根据商品名查找商品，库存管理人员已登录                      |
| 后置条件 | 从数据库中查找单一持久化对象，返回维护结果                    |

Commodity.findCommodityByID

| 语法   | public CommodityVO findCommoditybyID(long id) |
| ---- | ---------------------------------------- |
| 前置条件 | 根据ID查找商品，库存管理人员已登录                       |
| 后置条件 | 从数据库中查找单一持久化对象，返回维护结果                    |

Commodity.findCommodities

| 语法   | public ArrayList<CommodityVO> findCommodities() |
| ---- | ---------------------------------------- |
| 前置条件 | 查找商品，库存管理人员已登录                           |
| 后置条件 | 从数据库中查找单一持久化对象，返回维护结果                    |

Commodity.findCommoditiesbyParent

| 语法   | public ArrayList<CommodityPO> findCommoditiesbyParent(long parentid) |
| ---- | ---------------------------------------- |
| 前置条件 | 根据父类查找商品，库存管理人员已登录                       |
| 后置条件 | 从数据库中查找单一持久化对象，返回维护结果                    |

Commodity.insert

| 语法   | public boolean insert(CommodityPO po) |
| ---- | ------------------------------------- |
| 前置条件 | 选择新增商品，商品信息填写完整，库存管理人员已登录             |
| 后置条件 | 新增商品并将其作为持久化对象插入数据库，返回维护结果            |

Commodity.delete

| 语法   | public boolean delete(CommodityPO po) |
| ---- | ------------------------------------- |
| 前置条件 | 选择删除商品，库存管理人员已登录                      |
| 后置条件 | 删除商品并从数据库中删除单一持久化对象，返回维护结果            |

Commodity.update

| 语法   | public boolean update(CommodityPO po) |
| ---- | ------------------------------------- |
| 前置条件 | 选择修改商品，库存管理人员已登录                      |
| 后置条件 | 更新商品并从数据库中更新单一持久化对象，返回维护结果            |



##### Category的接口规范

Category.getLargestIDofCategory

| 语法   | public long getLargestIDofCategory() |
| ---- | ------------------------------------ |
| 前置条件 | 选择进入商品分类管理界面，库存管理人员已登录               |
| 后置条件 | 返回分类列表信息                             |
Category.insert

| 语法   | public boolean insert(CategoryPO po) |
| ---- | ------------------------------------ |
| 前置条件 | 选择新增分类，分类信息填写完整，库存管理人员已登录            |
| 后置条件 | 新增分类并将其作为持久化对象插入数据库，返回维护结果           |
Category.delete

| 语法   | public boolean delete(CategoryPO po) |
| ---- | ------------------------------------ |
| 前置条件 | 选择删除分类，库存管理人员已登录                     |
| 后置条件 | 删除分类并从数据库中删除单一持久化对象，返回维护结果           |
Category.update

| 语法   | public boolean update(CategoryPO po) |
| ---- | ------------------------------------ |
| 前置条件 | 选择修改分类，库存管理人员已登录                     |
| 后置条件 | 更新分类并从数据库中更新单一持久化对象，返回维护结果           |
Category.findCategories

| 语法   | public ArrayList<CategoryPO> findCategories() |
| ---- | ---------------------------------------- |
| 前置条件 | 查找分类，库存管理人员已登录                           |
| 后置条件 | 从数据库中查找单一持久化对象，返回维护结果                    |

Category.findCategorybyParent

| 语法   | public ArrayList<CategoryPO> findCategorybyParent(long parentid) |
| ---- | ---------------------------------------- |
| 前置条件 | 根据父类查找分类，库存管理人员已登录                       |
| 后置条件 | 从数据库中查找单一持久化对象，返回维护结果                    |

Category.findCategorybyID

| 语法   | public CategoryPO findCategorybyID(long id) |
| ---- | ---------------------------------------- |
| 前置条件 | 根据ID查找分类，库存管理人员已登录                       |
| 后置条件 | 从数据库中查找单一持久化对象，返回维护结果                    |

Category.findCategorybyName

| 语法   | public CategoryPO findCategorybyName(String Name) |
| ---- | ---------------------------------------- |
| 前置条件 | 根据名字查找分类，库存管理人员已登录                       |
| 后置条件 | 从数据库中查找单一持久化对象，返回维护结果                    |



需要的接口（需接口）

| 服务名                                      | 服务              |
| ---------------------------------------- | --------------- |
| CommodityDataService.findCommoditybyID(long id) | 根据ID查找单一持久化对象   |
| CommodityDataService.findCommoditiesbyField(String field) | 根据字段名称查找多个持久化对象 |
| CommodityDataService.insert(CommodityPO po) | 插入单一持久化对象       |
| CommodityDataService.delete(CommodityPO p) | 删除单一持久化对象       |
| CommodityDataService.update(CommodityPO p) | 更新单一持久化对象       |
| DatabaseFactory.findCommodities()        | 查找商品            |
| CommodityDataService.findCommoditybyName(String name) | 根据名称查找多个持久化对象   |
| CommodityDataService.findCommoditiesbyParent(long parentid) | 根据父类查找多个持久化对象   |
| CommodityDataService.getLargestIDofCommodity() | 查找ID最大的商品       |
（4）业务逻辑层动态设计模型

如图是商品管理增加商品的顺序图

![](商品管理增加商品顺序图.png)

商品管理删除商品顺序图

![](商品管理删除商品顺序图.png)

获取商品分类列表顺序图

![](获取商品分类列表顺序图.png)

获取商品信息顺序图

![](获取商品信息顺序图.png)

更新商品信息顺序图

![](更新商品信息顺序图.png)

####4.2.4 accountbl模块

#####4.2.4.1模块概述

accountbl模块承担的需求参见需求规格说明文档，功能需求及相关非功能需求参见需求规格说明文档。

Account模块的职责及接口参见软件系统结构描述文档表

#####4.2.4.2整体结构

根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口，比如展示层和业务逻辑层之间我们添加businesslogicservice.accountblservice.AccountBLService接口.业务逻辑层和数据层之间添加dataservice.accountdataservice.AccountDataService接口。为隔离业务逻辑职责和逻辑控制职责，我们增加了AccountController，这样AccountController会将对销售的业务逻辑处理委托给Account对象。AccountPO是作为销售记录的持久化对象被添加到设计模型中去的。

accountbl模块的设计如图。

![](accountbl模块设计.png)

accountbl模块各个类的职责如表所示。
| 模块                | 职责                       |
| ----------------- | ------------------------ |
| AccountController | 负责实现账户管理所需要的服务           |
| Account           | 银行账户的领域模型对象，拥有账户数据的名称和金额 |

#####4.2.4.3模块内部类的接口规范

#####AccountController接口规范

提供的服务（供接口）

AccountController.addAccount

| 语法   | public boolean addAccount(AccountVO accountVO) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个Account对象，并且输入符合输入规则                |
| 后置条件 | 调用Account领域对象的addAccount方法               |

AccountController.getAccount

| 语法   | public AccountVO findAccountByID(long id) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个Account对象，并且输入符合输入规则                |
| 后置条件 | 调用Account领域对象的getAccount方法               |

AccountController.deleteAccount

| 语法   | public boolean deleteAccount(AccountVO accountVO) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个Account对象，并且输入符合输入规则                |
| 后置条件 | 调用Account领域对象的deleteAccount方法            |

AccountController.modifyAccount

| 语法   | public boolean updateAccount(AccountVO accountVO) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个Account对象，并且输入符合输入规则                |
| 后置条件 | 调用Account领域对象的modifyAccount方法            |

AccountController.findAccountByField

| 语法   | public ArrayList<AccountVO> findAccountByField(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建Account对象，并且输入符合输入规则                  |
| 后置条件 | 调用Account领域对象的findAccountByField方法       |

AccountController.toAccountVO

| 语法   | public AccountVO toAccountVO(AccountPO accountPO) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个Account对象，并且输入符合输入规则                |
| 后置条件 | 调用Account领域对象的toAccountVO方法              |

AccountController.findAccounts

| 语法   | public ArrayList<AccountVO> findAccounts() |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个Account对象，并且输入符合输入规则                |
| 后置条件 | 调用Account领域对象的findAccounts方法             |

AccountController.backUpDataBase

| 语法   | public boolean backUpDataBase(Date time) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个Account对象，并且输入符合输入规则                |
| 后置条件 | 调用Account领域对象的backUpDataBase方法           |

AccountController.retore

| 语法   | public ArrayList<AccountBookData> retore() |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个AccountBookData对象，并且输入符合输入规则        |
| 后置条件 | 调用Account领域对象的retore方法                   |



需要的服务（供接口）

| 服务名                                      | 服务                     |
| ---------------------------------------- | ---------------------- |
| Account.addAccount(AccountVO accountVO)  | 加入一个银行账户对象             |
| Account.findAccountByID(long id)         | 根据ID查看一个的银行账户对象的具体信息   |
| Account.deleteAccount(AccountVO accountVO) | 删除一个银行账户对象             |
| Account.updateAccount(AccountVO accountVO) | 修改一个已存在的银行账户对象的信息      |
| Account.findAccountByField(String field) | 列出所有符合条件的银行账户信息        |
| Account.toAccountVO(AccountPO accountPO) | 将AccountPO转化为AccountVO |
| Account.findAccounts()                   | 列出所有银行账户信息             |
| Account.backUpDataBase(Date time)        | 把当时所有的账户信息存储起来         |
| Account.retore()                         | 查看期初建账的账本信息            |

#####Account的接口规范

Account.findAccountbyID

| 语法   | public AccountPO findAccountbyID(long id) |
| ---- | ---------------------------------------- |
| 前置条件 | 根据ID选择查看某具体银行账户信息，财务人员已登录                |
| 后置条件 | 返回账户信息                                   |

Account.insert

| 语法   | public boolean insert(AccountPO po) |
| ---- | ----------------------------------- |
| 前置条件 | 选择增加银行账户信息，财务人员已登录                  |
| 后置条件 | 增加账户信息，向数据库插入单一持久化对象，返回维护结果         |

Account.delete

| 语法   | public boolean delete(AccountPO po) |
| ---- | ----------------------------------- |
| 前置条件 | 选择删除银行账户信息，财务人员已登录                  |
| 后置条件 | 删除账户信息，从数据库删除单一持久化对象，返回维护结果         |

Account.update

| 语法   | public boolean update(AccountPO po) |
| ---- | ----------------------------------- |
| 前置条件 | 选择更新银行账户信息，财务人员已登录                  |
| 后置条件 | 更新账户信息，从数据库更新单一持久化对象，返回维护结果         |

Account.findAccounts

| 语法   | public ArrayList<AccountPO> findAccounts() |
| ---- | ---------------------------------------- |
| 前置条件 | 查看账户列表，财务人员已登录                           |
| 后置条件 | 返回账户列表信息                                 |

Account.findAcountbyField

| 语法   | public ArrayList<AccountPO> findAcountbyField(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 根据范围选择查看账户列表，财务人员已登录                     |
| 后置条件 | 返回账户列表信息                                 |

Account.backUpDataBase

| 语法   | public boolean backUpDataBase(Date time) |
| ---- | ---------------------------------------- |
| 前置条件 | 存储所有账户信息，财务人员已登录                         |
| 后置条件 | 返回是否存储成功                                 |

Account.restore

| 语法   | public ArrayList<BookPO> restore() |
| ---- | ---------------------------------- |
| 前置条件 | 查看期初建账的账本信息，财务人员已登录                |
| 后置条件 | 返回账本信息                             |

需要的接口（需接口）

| 服务名                                      | 服务                |
| ---------------------------------------- | ----------------- |
| AccountDataService.findAccountbyID(long id) | 根据ID查找单一持久化对象     |
| AccountDataService.findAcountbyField(String field) | 根据字段名称和值查找多个持久化对象 |
| AccountDataService.insert(AccountPO po)  | 插入单一持久化对象         |
| AccountDataService.delete(AccountPO po)  | 删除单一持久化对象         |
| AccountDataService.updte(AccountPO po)   | 更新单一持久化对象         |
| DatabaseFactory.findAccounts()           | 查找银行账户信息          |
| AccountDataService.backUpDataBase(Date time) | 存储账户信息            |
| AccountDataService.restore()             | 查看期初建账账本信息        |

（4）业务逻辑层动态设计模型

如图是增加账户顺序图

![](增加账户顺序图.png)

删除账户顺序图

![](删除账户顺序图.png)

修改账户信息顺序图

![](修改账户信息顺序图.png)

获取账户顺序图

![](获取账户顺序图.png)

####4.2.5 logbl模块

#####4.2.5.1模块概述

logbl模块承担的需求参见需求规格说明文档，功能需求及相关非功能需求参见需求规格说明文档。

Log模块的职责及接口参见软件系统结构描述文档表

#####4.2.5.2整体结构

根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口，比如展示层和业务逻辑层之间我们添加businesslogicservice.logblservice.LogBLService接口.业务逻辑层和数据层之间添加dataservice.logdataservice.LogDataService接口。为隔离业务逻辑职责和逻辑控制职责，我们增加了LogController，这样LogController会将对销售的业务逻辑处理委托给Log对象。LogPO是作为销售记录的持久化对象被添加到设计模型中去的。

logbl模块的设计如图。

![](logbl模块各个类的设计.png)

logbl模块各个类的职责如表所示。



| 模块            | 职责                         |
| ------------- | -------------------------- |
| LogController | 负责实现查看日志所需要的服务             |
| Log           | 日志的领域模型对象，拥有日志数据的时间，操作员，操作 |

#####4.5.2.3模块内部类的接口规范

#####LogController接口规范

提供的服务（供接口）

LogController.addLog

| 语法   | public boolean addLog(LogVO logVO) |
| ---- | ---------------------------------- |
| 前置条件 | 已创建一个Log对象，并且输入符合输入规则              |
| 后置条件 | 调用Log领域对象的addLog方法                 |

LogController.findLogs

| 语法   | public ArrayList<LogVO> findLogs() |
| ---- | ---------------------------------- |
| 前置条件 | 已创建一个Log对象                         |
| 后置条件 | 调用Log领域对象的findLogs方法               |

LogController.findLogByUserID

| 语法   | public ArrayList<LogVO> findLogByUserID(long userid) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个Log对象，userid存在                      |
| 后置条件 | 调用Log领域对象的findLogByUserID方法              |

LogController.findLogByField

| 语法   | public ArrayList<LogVO> findLogByField(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个Log对象，输入符合规则                        |
| 后置条件 | 调用Log领域对象的findLogByField方法               |

LogController.toLogVO

| 语法   | public LogVO toLogVO(LogPO logPO) |
| ---- | --------------------------------- |
| 前置条件 | 已创建一个LogPO对象                      |
| 后置条件 | 调用Log领域对象的toLogVO方法               |

LogController.findLargestID

| 语法   | public long findLargestID() |
| ---- | --------------------------- |
| 前置条件 | 已创建一个Log对象                  |
| 后置条件 | 调用Log领域对象的findLargestID方法   |

需要的的服务（需接口）

| 服务名                              | 服务             |
| -------------------------------- | -------------- |
| Log.addLog(LogVO logVO)          | 添加一个日志对象       |
| Log.findLogs()                   | 显示最近的一定数量的日志对象 |
| Log.findLogByUserID(long userid) | 根据ID查找日志       |
| Log.findLogByField(String field) | 根据字段名和值查找日志    |
| Log.toLogVO(LogPO logPO)         | 将LogPO转化为LogVO |
| Log.findLargestID()              | 查找最新的日志        |

#####Log的接口规范

Log.insert

| 语法   | public boolean insert(LogPO po) |
| ---- | ------------------------------- |
| 前置条件 | 用户进行了某项操作                       |
| 后置条件 | 记录操作的持久化数据对象到数据库                |

Log.findLogs

| 语法   | public ArrayList<LogPO> findLogs() |
| ---- | ---------------------------------- |
| 前置条件 | 用户进行了某项操作                          |
| 后置条件 | 显示一定数量的持久化数据对象                     |

Log.findLogbyOperator

| 语法   | public ArrayList<LogPO> findLogbyOperator(long operatorID) |
| ---- | ---------------------------------------- |
| 前置条件 | 用户进行了某项操作                                |
| 后置条件 | 根据操作员显示一定数量的持久化数据对象                      |

Log.findLogbyType

| 语法   | public ArrayList<LogPO> findLogbyType(String type) |
| ---- | ---------------------------------------- |
| 前置条件 | 用户进行了某项操作                                |
| 后置条件 | 根据日志种类显示一定数量的持久化数据对象                     |

Log.getLogNum

| 语法   | public int getLogNum() |
| ---- | ---------------------- |
| 前置条件 | 用户进行了某项操作              |
| 后置条件 | 显示日志数量                 |

Log.delete

| 语法   | public boolean delete(Date time) |
| ---- | -------------------------------- |
| 前置条件 | 用户进行了某项操作                        |
| 后置条件 | 删除单一的持久化数据对象                     |

Log.update

| 语法   | public boolean update(LogPO po) |
| ---- | ------------------------------- |
| 前置条件 | 用户进行了某项操作                       |
| 后置条件 | 修改单一的持久化数据对象                    |

Log.getLargestIDofLog

| 语法   | public long getLargestIDofLog() |
| ---- | ------------------------------- |
| 前置条件 | 用户进行了某项操作                       |
| 后置条件 | 显示一定数量的持久化数据对象                  |

需要的服务（需接口）

| 服务名                                      | 服务              |
| ---------------------------------------- | --------------- |
| LogDataService.findLogs()                | 查找所有单一持久化对象     |
| LogDataService.insert(LogPO po))         | 插入单一持久化对象       |
| LogDataService.delete(LogPO po)          | 删除单一持久化对象       |
| LogDataService.update(LogPO po)          | 更新单一持久化对象       |
| LogDataService.findLogbyOperator(long operatorID) | 根据操作员查找单一持久化对象  |
| LogDataService.findLogbyType(String type) | 根据日志种类查找单一持久化对象 |
| LogDataService.getLargestIDofLog()       | 查找最新日志记录        |
| LogDataService.getLogNum()               | 查询日志数量          |



（4）业务逻辑层动态设计模型

如图是增加操作记录顺序图

![](增加操作记录顺序图.png)

查看操作记录顺序图

![](查看操作记录顺序图.png)

#### 4.2.6 userbl模块

#####4.2.6.1模块概述

userbl模块承担的需求参见需求规格说明文档，功能需求及相关非功能需求参见需求规格说明文档。

User模块的职责及接口参见软件系统结构描述文档表

#####4.2.6.2整体结构

根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口，比如展示层和业务逻辑层之间我们添加businesslogicservice.userblservice.UserBLService接口.业务逻辑层和数据层之间添加dataservice.userdataservice.UserDataService接口。为隔离业务逻辑职责和逻辑控制职责，我们增加了UserController，这样UserController会将对销售的业务逻辑处理委托给User对象。UserPO是作为销售记录的持久化对象被添加到设计模型中去的。

userbl模块的设计如图。

![](userbl模块设计.png)

userbl模块各个类的职责如表所示。

| UserController | 负责实现用户界面所需要的服务                           |
| -------------- | ---------------------------------------- |
| User           | 用户的领域模型对象，拥有姓名，工号，职位，权限等信息，可以帮助实现用户界面所需要的服务 |

模块内部类的接口规范



#####4.2.6.3模块内部类的接口规范

#####Usercontroller的接口规范

UserController.findUsers

| 语法   | public ArrayList<UserVO> findUsers() |
| ---- | ------------------------------------ |
| 前置条件 | 已创建一个user领域对象，并且输入正确                 |
| 后置条件 | 调用user领域对象的findUsers方法               |


UserController.findUserbyName 

| 语法   | public UserVO findUserbyName (String name) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个user领域对象，并且输入正确                     |
| 后置条件 | 调用user领域对象的findUserbyName方法              |

UserController.findUserByID

| 语法   | public UserVO findUserByID(long id) |
| ---- | ----------------------------------- |
| 前置条件 | 已创建一个user领域对象，并且输入正确                |
| 后置条件 | 调用user领域对象的findUserByID方法           |

UserController.findUsersbyField

| 语法   | public ArrayList<UserVO> findUsersbyField(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个user领域对象，并且输入正确                     |
| 后置条件 | 调用user领域对象的findUsersbyField方法            |

 UserController.addUser

| 语法   | public boolean addUser( UserVO a) |
| ---- | --------------------------------- |
| 前置条件 | 已创建一个user领域对象，并且输入正确              |
| 后置条件 | 调用user领域对象的addUser方法              |

 UserController.deleteUser
| 语法   | public boolean deleteUser( UserVO a) |
| ---- | ------------------------------------ |
| 前置条件 | 已创建一个user领域对象，并且输入正确                 |
| 后置条件 | 调用user领域对象的deleteUser方法              |


UserController.updateUser

| 语法   | public boolean updateUser(UserVO c) |
| ---- | ----------------------------------- |
| 前置条件 | 已创建一个user领域对象，并且输入正确                |
| 后置条件 | 调用user领域对象的updateUser方法             |

UserController.toUserVO

| 语法   | public UserVO toUserVO(UserPO userPO) |
| ---- | ------------------------------------- |
| 前置条件 | 已创建一个user领域对象，并且输入正确                  |
| 后置条件 | 调用user领域对象的toUserVO方法                 |



##### User的接口规范

User.addUser

| 语法   | public boolean addUser (UserVO a) |
| ---- | --------------------------------- |
| 前置条件 | 管理员已登录                            |
| 后置条件 | 增添一个用户信息                          |

User.deleteUser

| 语法   | public boolean deleteUser (UserVO a) |
| ---- | ------------------------------------ |
| 前置条件 | 管理员已登录                               |
| 后置条件 | 删除一个用户信息                             |

User.updateUser

| 语法   | public boolean updateUser (UserVO a) |
| ---- | ------------------------------------ |
| 前置条件 | 此用户存在，管理员已登录                         |
| 后置条件 | 更改用户的信息                              |

User.findUsers

| 语法   | public ArrayList<UserVO> findUsers () |
| ---- | ------------------------------------- |
| 前置条件 | 输入的关键词正确，管理员已登录                       |
| 后置条件 | 显示用户的信息                               |

User.findUserbyName 

| 语法   | public UserVO findUserbyName (String name) |
| ---- | ---------------------------------------- |
| 前置条件 | 输入的关键词正确，管理员已登录                          |
| 后置条件 | 显示查询用户的信息                                |

User.findUserByID

| 语法   | public UserVO findUserByID(long id) |
| ---- | ----------------------------------- |
| 前置条件 | 输入的关键词正确，管理员已登录                     |
| 后置条件 | 显示查询用户的信息                           |

User.findUsersbyField

| 语法   | public ArrayList<UserVO> findUsersbyField(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 输入的关键词正确，管理员已登录                          |
| 后置条件 | 显示查询用户的信息                                |

User.toUserVO

| 语法   | public UserVO toUserVO(UserPO userPO) |
| ---- | ------------------------------------- |
| 前置条件 | 存在一个UserPO对象，管理员已登录                   |
| 后置条件 | UserPO转化为UserVO                       |

需要的服务（需接口）

| 服务名                                      | 服务                |
| ---------------------------------------- | ----------------- |
| UserDataService.findUserByID(long id)    | 根据客户编号进行查找单一持久化对象 |
| UserDataService.findUsersbyField(String field) | 根据字段名和值查找多个持久化对象  |
| UserDataService.addUser(UserVO a)        | 插入单一持久化对象         |
| UserDataService.deleteUser(UserVO a)     | 删除单一持久化对象         |
| UserDataService.updateUser(UserVO a)     | 更新单一持久化对象         |
| UserDataService.findUserbyName (String name) | 根据客户姓名进行查找单一持久化对象 |
| UserDataService.findUsers()              | 查询信息              |
| UserDataService.toUserVO(UserPO userPO)  | 将UserPO转化为UserVO  |

（4）业务逻辑层动态设计模型

如图是增加用户顺序图

![](增加用户顺序图.png)

删除用户顺序图

![](删除用户顺序图.png)

获取用户信息顺序图

![](获取用户信息顺序图.png)

更新用户信息顺序图

![](更新用户信息顺序图.png)

#### 4.2.7 promotionbl模块

#####4.2.7.1模块概述

promotionbl模块承担的需求参见需求规格说明文档，功能需求及相关非功能需求参见需求规格说明文档。

Promotion模块的职责及接口参见软件系统结构描述文档表

#####4.2.7.2整体结构

根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口，比如展示层和业务逻辑层之间我们添加businesslogicservice.promotionblservice.PromotionBLService接口.业务逻辑层和数据层之间添加dataservice.promotiondataservice.PromotionDataService接口。为隔离业务逻辑职责和逻辑控制职责，我们增加了PromotionController，这样PromotionController会将对销售的业务逻辑处理委托给Promotion对象。PromotionPO是作为销售记录的持久化对象被添加到设计模型中去的。

promotionbl模块的设计如图。

![](promotionbl模块.png)

promotionbl模块各个类的职责如表所示。

| 模块                  | 职责                                       |
| ------------------- | ---------------------------------------- |
| PromotionController | 负责实现表格查看界面所需要的服务                         |
| Promotion           | 表格的领域对象模型，拥有一次表个插卡所持有的各类表单的引用，可以帮助完成表格查看界面所需要的服务 |

##### 4.2.7.3模块内部类的接口规范



#####PromotionController的接口规范

提供的服务（供接口）

PromotionController.addPromotion

| 语法   | public  String  addPromotion(PromotionVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个Promotion领域对象，并且输入符合输入规则            |
| 后置条件 | 调用Promotion领域对象的addPromotion方法           |

PromotionController.deletePromotion

| 语法   | public  String  deletePromotion（long id） |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个Promotion领域对象，并且输入符合输入规则            |
| 后置条件 | 调用Promotion领域对象的deletePromotion方法        |

PromotionController.getPromotionList

| 语法   | public  String  getPromotionList(String field，long id) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个Promotion领域对象，并且输入符合输入规则            |
| 后置条件 | 调用Promotion领域对象的getPromotionList方法       |

PromotionController.getPromotion

| 语法   | public  String  getPromotion(long id) |
| ---- | ------------------------------------- |
| 前置条件 | 已创建一个Promotion领域对象，并且输入符合输入规则         |
| 后置条件 | 调用Promotion领域对象的getPromotion方法        |





需要的服务（需接口）

| 服务名              | 服务          |
| ---------------- | ----------- |
| addPromotion     | 增加一个促销策略    |
| deletePromotion  | 删除一个促销策略    |
| getPromotionList | 获得促销策略列表    |
| getPromotion     | 获得一个促销策略的对象 |

#####Promotion的接口规范

提供的服务（供接口）

Promotion.addPromotion

| 语法   | public ResultMessage addPromotion() |
| ---- | ----------------------------------- |
| 前置条件 | 选择新增促销策略，总经理已登录                     |
| 后置条件 | 增加策略信息，向数据库插入单一持久化对象，返回维护结果         |


Promotion.deletePromotion

| 语法   | public ResultMessage deletePromotion() |
| ---- | -------------------------------------- |
| 前置条件 | 选择停用促销策略，总经理已登录                        |
| 后置条件 | 删除账户信息，向数据库删除单一持久化对象，返回维护结果            |

Promotion.getPromotion

| 语法   | public PromotionVO getPromotion() |
| ---- | --------------------------------- |
| 前置条件 | 选择查看促销策略，总经理已登录                   |
| 后置条件 | 返回策略信息                            |

Promotion.getPromotinoList
| 语法   | public Promotion getPromotionList() |
| ---- | ----------------------------------- |
| 前置条件 | 选择查看全部促销策略，总经理已登录                   |
| 后置条件 | 返回全部促销策略                            |


需要的接口（需接口）

| 服务名                                      | 服务            |
| ---------------------------------------- | ------------- |
| CommodityDataService.find(int id)        | 根据ID查找单一持久化对象 |
| PromotionDataService.insert(CommodityPO po) | 插入单一持久化对象     |
| PromotionDataService.delete(CommodityPO p) | 删除单一持久化对象     |

（4）业务逻辑层的动态模型

如图是获取促销方案的顺序图

![](获取促销方案顺序图.png)

增加促销方案的顺序图

![](增加促销方案顺序图.png)

删除促销方案的顺序图

![](删除促销方案顺序图.png)

获取促销策略列表的顺序图参照获取促销策略。

#### 4.2.8 billbl模块

#####4.2.8.1模块概述

billbl模块承担的需求参见需求规格说明文档，功能需求及相关非功能需求参见需求规格说明文档。

Bill模块的职责及接口参见软件系统结构描述文档表

##### 4.2.8.2整体结构



根据体系结构的设计，我们将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口，比如展示层和业务逻辑层之间我们添加businesslogicservice.billblservice.BillBLService接口.业务逻辑层和数据层之间添加dataservice.billdataservice.BillDataService接口。为隔离业务逻辑职责和逻辑控制职责，我们增加了BillController，这样BillController会将对销售的业务逻辑处理委托给Bill对象。BillPO是作为销售记录的持久化对象被添加到设计模型中去的。

billbl模块的设计如图。

![](billbl模块设计.png)

billbl模块各个类的职责如表所示。
| BillController   | 负责实现对应于生成单据需要的服务                        |
| ---------------- | --------------------------------------- |
| Bill             | 单据的领域模型对象，是所有单据类型的父类                    |
| CashBill         | 现金费用单的领域模型对象， 拥有业务员，账户，金额等信息            |
| LossBill         | 库存报损单的领域模型对象，拥有商品，库存量等信息                |
| GiftBill         | 库存赠送单的领域模型对象，拥有商品，赠送量等信息                |
| ImportBill       | 进货单的领域模型对象，拥有业务员，客户，商品，金额等信息，解决进货问题     |
| ImportReturnBill | 进货退货单的领域模型对象，拥有业务员，客户，商品，金额等信息，解决进货退货问题 |
| OverBill         | 库存报溢单的领域模型对象，拥有商品，库存量等信息                |
| PayBill          | 付款单的领域模型对象，拥有业务员，账户，金额等信息，解决付款问题        |
| ReceiveBill      | 收款单的领域模型对象，拥有业务员，账户，金额等信息，解决收款问题        |
| SaleBill         | 销售单的领域模型对象，拥有业务员，客户，商品，金额等信息，解决销售问题     |
| SaleReturnBill   | 销售退货单的领域模型对象，拥有业务员，客户，商品，金额等信息，解决销售退货问题 |
| WarningBill      | 库存报警单的领域模型对象，拥有商品，库存量等信息                |

##### 4.2.8.3模块内部类的接口规范



#####BillController模块的接口规范

BillController.makeImportbill

| 语法   | public ImportBillPO makeImportBill（ImportBllVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个ImportBill领域对象                      |
| 后置条件 | 调用ImportBill领域对象的makeImportBill方法        |

BillController.makeImportReturnbill

| 语法   | public ImportReturnBillPO makeImportReturnbill（ImportReturnBillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个ImportReturnBill领域对象                |
| 后置条件 | 调用ImportReturnBill领域对象的makeImportReturnBill方法 |

BillController.makeSalebill

| 语法   | public SaleBillPO makeSaleBill（SaleBillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个SaleBill领域对象                        |
| 后置条件 | 调用SaleBill领域对象的makeSaleBill方法            |

BillController.makeSaleReturnbill

| 语法   | public SaleReturnBillPO makeSaleReturnBill（SaleReturnBillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个SaleReturnBill领域对象                  |
| 后置条件 | 调用SaleBill领域对象的makeSaleReturnBill方法      |

BillController.makePaybill

| 语法   | public PayBillPO makePayBill（PayBillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个PayBill领域对象                         |
| 后置条件 | 调用PayBill领域对象的makePayBill方法              |

BillController.makeReceivebill

| 语法   | public ReceiveBillPO makeReceiveBill（ReceiveBillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个ReceiveBill领域对象                     |
| 后置条件 | 调用ReceiveBill领域对象的makeReceiveBill方法      |

BillController.makeGiftbill

| 语法   | public GiftBillPO makeGiftBill（GiftBillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个GiftBill领域对象                        |
| 后置条件 | 调用GiftBill领域对象的makeGiftBill方法            |

BillController.makeOverbill

| 语法   | public OverBillPO makeOverBill(OverBillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个OverBill领域对象                        |
| 后置条件 | 调用OverBill领域对象的makeOverBill方法            |

BillController.makeWarningbill

| 语法   | public WarningBillPO makeWarningBill(WarningBillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个WarningBill领域对象                     |
| 后置条件 | 调用WarningBill领域对象的makeWarningBill方法      |

BillController.makeCashbill

| 语法   | public CashBillPO makeCashBill(CashBillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个CashBill领域对象                        |
| 后置条件 | 调用CashBill领域对象的makeCashBill方法            |

BillController.makeLossbill

| 语法   | public LossBillPO makeLossBill(LossBillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 已创建一个DamageBill领域对象                      |
| 后置条件 | 调用DamageBill领域对象的makeDamageBill方法        |

BillController.conveyBill

| 语法   | public String conveyBill(BillVO vo) |
| ---- | ----------------------------------- |
| 前置条件 | 已创建一个Bill领域对象                       |
| 后置条件 | 调用Bill领域对象的conveyBill方法             |

BillController.checkBill

| 语法   | public String checkBill(BillVO vo) |
| ---- | ---------------------------------- |
| 前置条件 | 已创建一个Bill领域对象                      |
| 后置条件 | 调用Bill领域对象的checkBill方法             |




#####*Bill模块的接口规范

Bill.conveyBill

| 语法   | public String conveyBill(BillVO vo) |
| ---- | ----------------------------------- |
| 前置条件 | 完成单据制定或审批                           |
| 后置条件 | 将单据推送给目标人员                          |

Bill.checkBill

| 语法   | public String checkMessage(BillVO vo) |
| ---- | ------------------------------------- |
| 前置条件 | 总经理已登录                                |
| 后置条件 | 修改单据状态                                |

ImportBill模块的接口规范

ImportBill.getCommoditys

| 语法   | public ArrayList<CommodityLineItem> getCommoditys(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 返回模糊查询的商品列表                              |

ImportBill.addCommoditys

| 语法   | public void addCommodityItem(CommodityLineItem item) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 向商品列表中添加商品                               |

ImportBill.deleteCommoditys

| 语法   | public void deleteCommodityItem(CommodityLineItem item) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 从商品列表中删除一项商品                             |

ImportBill.getTotal

| 语法   | public int getTotal() |
| ---- | --------------------- |
| 前置条件 | 进货销售人员已登录             |
| 后置条件 | 返回商品列表总价              |

ImportBill.toBillVO

| 语法   | public ImportBillVO toBillVO(long id,String user,String member,int sum,CommodityList list,int time) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 返回一个单据数据对象                               |



ImportReturnBill模块的接口规范

ImportReturnBill.getCommoditys

| 语法   | public ArrayList<CommodityLineItem> getCommoditys(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 返回模糊查询的商品列表                              |

ImportReturnBill.addCommoditys

| 语法   | public void addCommodityItem(CommodityLineItem item) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 向商品列表中添加商品                               |

ImportReturnBill.deleteCommoditys

| 语法   | public void deleteCommodityItem(CommodityLineItem item) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 从商品列表中删除一项商品                             |

ImportReturnBill.getTotal

| 语法   | public int getTotal() |
| ---- | --------------------- |
| 前置条件 | 进货销售人员已登录             |
| 后置条件 | 返回商品列表总价              |

ImportReturnBill.toBillVO

| 语法   | public ImportReturnBillVO toBillVO(long id,String user,String member,int sum,CommodityList list,int time) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 返回一个单据数据对象                               |


SaleBill模块的接口规范

SaleBill.getCommoditys

| 语法   | public ArrayList<CommodityLineItem> getCommoditys(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 返回模糊查询的商品列表                              |

SaleBill.addCommoditys

| 语法   | public void addCommodityItem(CommodityLineItem item) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 向商品列表中添加商品                               |

SaleBill.deleteCommoditys

| 语法   | public void deleteCommodityItem(CommodityLineItem item) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 从商品列表中删除一项商品                             |

SaleBill.getTotal

| 语法   | public int getTotal() |
| ---- | --------------------- |
| 前置条件 | 进货销售人员已登录             |
| 后置条件 | 返回商品列表总价              |

SaleBill.toBillVO

| 语法   | public SaleBillVO toBillVO(long id,String user,String member,int sum,CommodityList list,int time) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 返回一个单据数据对象                               |

SaleBill.setPromotion

| 语法   | public void setPromotion() |
| ---- | -------------------------- |
| 前置条件 | 进货销售人员已登录                  |
| 后置条件 | 设定有效促销策略                   |

SaleReturnBil模块的接口规范

SaleReturnBill.getCommoditys

| 语法   | public ArrayList<CommodityLineItem> getCommoditys(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 返回模糊查询的商品列表                              |

SaleReturnBill.addCommoditys

| 语法   | public void addCommodityItem(CommodityLineItem item) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 向商品列表中添加商品                               |

SaleReturnBill.deleteCommoditys

| 语法   | public void deleteCommodityItem(CommodityLineItem item) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 从商品列表中删除一项商品                             |

SaleReturnBill.getTotal

| 语法   | public int getTotal() |
| ---- | --------------------- |
| 前置条件 | 进货销售人员已登录             |
| 后置条件 | 返回商品列表总价              |

SaleReturnBill.toBillVO

| 语法   | public SaleReturnBillVO toBillVO(long id,String user,String member,int sum,CommodityList list,int time) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 返回一个单据数据对象                               |

Paybill模块的接口规范
Paybill.toBillVO

| 语法   | public PayBillVO toBillVO（long id, String user,String member,int sum ,int time) |
| ---- | ---------------------------------------- |
| 前置条件 | 财务人员已登录                                  |
| 后置条件 | 返回单据数据对象                                 |

ReceiveBill模块的接口规范

ReceiveBill.toBillVO

| 语法   | public ReceiveBillVO toBillVO（long id, String user,String member,int sum ,int time) |
| ---- | ---------------------------------------- |
| 前置条件 | 财务人员已登录                                  |
| 后置条件 | 返回单据数据对象                                 |


GiftBill模块的接口规范

GiftBill.toBillVO

| 语法   | public GiftBillVO toBillVO(CommodityList list,long id,String user,String member,int time) |
| ---- | ---------------------------------------- |
| 前置条件 | 库存管理人员选择商品进行赠送，库存管理人员已登录                 |
| 后置条件 | 返回单据数据对象                                 |

GiftBill.updateGiftbill

| 语法   | public GiftBillVO updateGiftbill(GiftBillVO giftbill) |
| ---- | ---------------------------------------- |
| 前置条件 | 库存管理人员选择商品进行赠送，库存管理人员已登录                 |
| 后置条件 | 更新库存赠送单                                  |

GiftBill.getCommoditys

| 语法   | public ArrayList<CommodityLineItem> getCommoditys(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 库存管理人员选择商品进行赠送，库存管理人员已登录                 |
| 后置条件 | 返回模糊查询的商品列表                              |


GiftBill.addCommodityItem

| 语法   | public void addCommodityItem(CommodityLineItem item) |
| ---- | ---------------------------------------- |
| 前置条件 | 库存管理人员选择商品进行赠送，库存管理人员已登录                 |
| 后置条件 | 向商品列表中增加商品                               |

GiftBill.deleteCommodityItem

| 语法   | public void deleteCommodityItem(CommodityLineItem item) |
| ---- | ---------------------------------------- |
| 前置条件 | 库存管理人员选择商品进行赠送，库存管理人员已登录                 |
| 后置条件 | 向商品列表中增加商品                               |

OverBill模块的接口规范

LossbBill模块的接口规范

CashBill模块的接口规范

WarningBill模块的接口规范

参见PayBill

| 语法   | public WarningBillPO makeWarningBill(WarningBillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 库存数量低于警戒线，库存管理人员已登录                      |
| 后置条件 | 生成库存报警单                                  |



需要的服务（需接口）

| 服务名                                 | 服务                  |
| ----------------------------------- | ------------------- |
| BillDataService.insert(*BillPO po)  | 插入单一持久化对象           |
| BillDataService.delete(*BillPO po)  | 删除单一持久化对象           |
| BillDataService.update(*BillPO po)  | 更新单一持久化对象           |
| BillDataService.getCommdityDatabase | 得到Commdity数据库的服务的引用 |
| BillDataService.getUserDatabase     | 得到User数据库的服务的引用     |
| BillDataService.getBillDatabase     | 得到Bill数据库的服务的引用     |
| BillDataService.getMemberDatabase   | 得到Member数据库的服务的引用   |

(4)业务逻辑层动态设计模型

如图是制定进货单据顺序图

![](制定进货单据顺序图.png)

传输单据信息顺序图

![](传输单据信息顺序图.png)

## 5.依赖视角客户端和服务器各自的包之间的依赖关系。



#### 服务器端

![](图4：进销存系统服务器端开发包图.png)

####客户端

![](图3：进销存系统客户端开发包 .png)