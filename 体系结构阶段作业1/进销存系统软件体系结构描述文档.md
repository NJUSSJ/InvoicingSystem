# 进销存系统软件体系结构描述文档

1. ##引言

    ####1.1编制目的

   本报告详细完成对进销存系统的概要设计，达到指导详细设计和开发的目的，同时实现和测试人员及用户的沟通。
   本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。

  ### 1.2词汇表

###   1.3参考资料



##2. 产品概述

  参考进销存系统用例文档和进销存系统需求规格说明文档中对产品的概括描述。



##3. 逻辑视角

  进销存管理系统中，选择了分层体系结构风格，将系统分为三层（展示层、业务逻辑层、数据层）能够很好的示意整个高层抽象。展示层包含GUI界面的实现，业务逻辑层包含业务逻辑的处理实现，数据层包括数据的持久化和访问。分层体系结构的逻辑视角和逻辑设计方案如图1图2（文档外）所示。

## 4.组合视角

 ###  4.1开发包图

进销存系统的最终开发包图的设计如表1所示

##### 表1   进销存管理系统的最终开发包设计

| 开发（物理）包              | 依赖的其他开发包                                 |
| -------------------- | ---------------------------------------- |
| mainui               | salesui，commdityui，memberui，promotionui，userui，accountui，tableui，billui，vo |
| salesui              | salesblservice,界面类库包,vo                  |
| salesblservice       |                                          |
| salesbl              | salesblservice，salesdataservice，po，userbl，promotionbl，commoditybl |
| salesdataservice     | Java RMI，po                              |
| salesdata            | databaseutility，po，salesdataservice      |
| commodityui          | commodityblservice，界面类库包                 |
| commodityblservice   |                                          |
| commoditybl          | commodityblservice，commoditydataservice，po，billbl |
| commoditydataservice | Java RMI，po                              |
| commoditydata        | Java RMI，po，databaseutility              |
| memberui             | memberblservice，界面类库包                    |
| memberblservice      |                                          |
| memberbl             | memberblservice，memberdataservice，po，commditybl， billbl |
| memberdataservice    | Java RMI，po                              |
| memberdata           | Java RMI，po，databaseutility              |
| promotionui          | promotionblservice，界面类库包                 |
| promotionblservice   |                                          |
| promotionbl          | promotionblservice，promotiondataservice，commditybl，memberbl， vo |
| promotiondataservice | Java RMI，po                              |
| promotiondata        | Java RMI，po，databaseutility              |
| userui               | userblservice，界面类库包                      |
| userblservice        |                                          |
| userbl               | Userinterface，Userdataclient，Userpo      |
| userdataservice      | Java RMI，po                              |
| userdata             | RMI，po，databaseutiity                    |
| accountui            | accountblservice，界面类库包                   |
| accountblservice     |                                          |
| accountbl            | accountblservice，accountdataservice，po， billbl |
| accountdataservice   | Java RMI，po                              |
| accountdata          | Java RMI，po，databaseutility              |
| tableui              | tableblservice，界面类库包                     |
| tableblservice       |                                          |
| tablebl              | tableblservice，tabledataservice，po，billbl，commoditybl |
| tabledataservice     | Java RMI，po                              |
| tabledata            | Java RMI，po，databaseutility              |
| billui               | billblservice，界面类库包                      |
| billblservice        |                                          |
| billbl               | billblservice，billdataservice，po，salebl  |
| billdataservice      | Java RMI，po                              |
| billdata             | Java RMI，po，databaseutility              |
| vo                   |                                          |
| po                   |                                          |
| utilitybl            |                                          |
| 界面类库包                |                                          |
| Java RMI             |                                          |
| databaseutility      | JDBC                                     |

进销存管理系统客户端开发包图如图3所示，服务器端开发包图如图4所示。

### 4.2运行时进程

​	在进销存管理系统中，会有多个客户端进程和一个服务器进程，其进程图如文档外进程图（图5）所示。结合部署图，客户端进程是在客户端机器上运行，服务器进程在服务器端机器上运行。

### 4.3物理部署

进销存管理系统中客户端构件是放在客户端机器上，服务器端构件是放在服务器机器上。在客户端节点上，还要部署RMIStub构件。由于Java RMI构件属于JDK 6.0 的一部分。所以，在系统JDK环境已经设置好的情况下，不需要再独立部署。部署图如文档外部署图（图6）所示。

##5.接口视角

### 5.1模块的职责

客户端模块和服务器模块视图如文档外模块视图所示

客户端各层和服务器各层的职责分别如表2和表3所示



#####                                                                                              表2 客户端各层的职责

|    层    |           职责           |
| :-----: | :--------------------: |
|  启动模块   |   负责初始化网路通信机制，启动用户界面   |
|  用户界面层  |   基于窗口的进销存系统客户端用户界面    |
|  业务逻辑层  | 对于用户界面的输入进行响应并进行业务处理逻辑 |
| 客户端网络模块 |  利用Java RMI机制查找RMI服务   |



#####                                                                                             表3 服务器端各层的职责

|    层     |         职责          |
| :------: | :-----------------: |
|   启动模块   | 负责初始化网路通信机制，启动用户界面  |
|   数据层    |  负责数据的持久化以及数据访问接口   |
| 服务器端网络模块 | 利用Java RMI机制查找RMI服务 |

每层只是使用下方直接接触的层。层与层之间仅仅是通过接口的调用来完成的。层之间调用的接口如表4所示。

##### 表4 层之间调用的接口

| 接口                                       | 服务调用方    | 服务提供方    |
| ---------------------------------------- | -------- | -------- |
| userblservice<br>saleblservice<br>memberblservice<br>commodityblservice<br>promotionblservice<br>tableblservice<br>billblservice<br>accountblservice | 客户端展示层   | 客户端业务逻辑层 |
| userdataservice<br>saledataservice<br>memberdataservice<br>commoditydataservice<br>promotiondataservice<br>tabledataservice<br>billdataservice<br>accountdataservice<br>datafactoryservice | 客户端业务逻辑层 | 服务器端数据层  |

借用库存管理用例来说明层与层之间的调用，如文档外图“库存管理层与层之间调用的接口”（图9）所示。每一层之间都是由上层依赖了一个接口（需接口),而下层实现了这个接口（供接口）。CommodityBlService提供了Commodity界面所需要的业务逻辑功能。CommodityDataService提供了对数据库的增删查改等操作。这样的实现就大大降低了层与层之间的耦合度。

### 5.2用户界面层的分解

根据需求，系统存在27个用户界面，界面跳转如图10所示。

服务器端和客户端用户界面设计接口一直，只是具体界面不一样。用户界面类如图11所示。

####5.2.1用户界面层模块的职责

如表5所示为用户界面层模块职责。

##### 表5 用户界面层模块职责

| 模块        | 职责                    |
| --------- | --------------------- |
| MainFrame | 界面Frame，负责界面的显示和界面的跳转 |

####5.2.2 用户界面层模块的接口规范

用户界面层模块的接口规范如表6所示。

##### 表6 用户界面层模块接口规范

MainFrame：

| 语法   | init（args：String[]） |
| ---- | ------------------- |
| 前置条件 | 无                   |
| 后置条件 | 显示Frame以及LoginPanel |

用户界面所需的服务接口如表7所示

##### 表7 用户界面层模块所需的服务接口

| 服务名                                 | 服务               |
| ----------------------------------- | ---------------- |
| businesslogicservice.LoginBLService | 登录界面的业务逻辑接口      |
| businesslogicservice.*BLService     | 每个界都有一个相应的业务逻辑接口 |

### 5.3 业务逻辑层的分解

业务逻辑层包括多个针对界面的业务逻辑处理对象。例如，User对象负责处理登录界面的业务逻辑；Sales对象负责销售界面的业务逻辑。业务逻辑层的设计如文档外“业务逻辑层的设计”（图12）所示。

####5.3.1 业务逻辑层模块的职责

业务逻辑层模块的职责如表8所示

##### 表8 业务逻辑层模块的职责

| 模块          | 职责                   |
| ----------- | -------------------- |
| salebl      | 负责实现销售进货人员界面所需要的服务   |
| userbl      | 负责实现用户管理界面与登录界面所需的服务 |
| commoditybl | 负责实现库存管理与商品管理界面所需的服务 |
| tablebl     | 负责实现表格查看界面所需的服务      |
| billbl      | 负责实现表单制定与查看界面所需的服务   |
| accountbl   | 负责实现银行账户管理界面所需的服务    |
| memberbl    | 负责实现客户管理界面所需的服务      |
| promotionbl | 负责实现制定促销策略界面所需的服务    |

