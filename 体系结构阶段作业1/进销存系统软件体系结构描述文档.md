进销存系统软件体系结构描述文档

1. ##引言

    ####1.1编制目的

   本报告详细完成对进销存系统的概要设计，达到指导详细设计和开发的目的，同时实现和测试人员及用户的沟通。
   本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。

  ### 1.2词汇表

| 词汇名称        | 词汇含义             | 备注   |
| ----------- | ---------------- | ---- |
| *ui         | 表示某展示层           |      |
| *bl         | 表示某逻辑层           |      |
| *data       | 表示某数据层           |      |
| RMI         | 表示远程方法调用         |      |
| utilitybl   | 表示初始化和业务逻辑上下文的工作 |      |
| datafactory | 表示调用其他数据库的方法     |      |

###   1.3参考资料

1.IEEE std 1471-2000

2.丁二玉，刘钦.计算与软件工程（卷二）[M]机械工业出版2012：134—182

##2. 产品概述

  参考进销存系统用例文档和进销存系统需求规格说明文档中对产品的概括描述。



##3. 逻辑视角

  进销存管理系统中，选择了分层体系结构风格，将系统分为三层（展示层、业务逻辑层、数据层）能够很好的示意整个高层抽象。展示层包含GUI界面的实现，业务逻辑层包含业务逻辑的处理实现，数据层包括数据的持久化和访问。分层体系结构的逻辑视角和逻辑设计方案如图1图2（文档外）所示。

## 4.组合视角

[软工2 166]与抽象的逻辑设计相比，实现物理设计要考虑更多的实现细节，这些细节有：

1）presentation层与logic层被置于客户端，data层被置于服务器端，那么logic层的开发包不可能依赖于data层的开发包。使用RMI技术，将data层开发包分解为置于客户端的data_service接口包和置于服务器端的data层开发包。这样一来，logic层开发包依赖于data_service包，data_service包和data层的开发包都依赖于RMI类库包。

2）所有的data层开发包都需要进行数据持久化（例如读写数据库、读写文件等），所以它们会有一些重复代码，可以将重复代码独立为新的开发包，然后所有的data层开发包都依赖于databaseutility。datavaseutility会依赖于JDBC类库包。

3）所有的presentation层开发包都需要使用图形类型建立界面，都要依赖于图形界面类库包。

4）此外，presentation层实现时，由main_ui包负责整个页面之间的跳转逻辑。其他各包负责各自页面自身的功能。

5）在分层风格的典型设计中，不希望高层直接依赖于低层，而是为低层建立接口包，实现依赖倒置原则，所以应该调整为：各presentation层开发包（调用）依赖于logic层接口包businesslogicservice包，logic层开发包也依赖于（实现了）logic层接口包businesslogicservice包。

6）在分层风格的典型设计中，presentation层与logic层之间、logic层与data层之间可能会传递复杂数据对象，那么相邻两层都需要使用数据对象声明，所以需要将数据对象声明独立为开发包（VO包和PO包）。

7） 使用依赖倒置原则来消除包的循环依赖问题，将循环依赖变为单向依赖：

- ​	Commodity和Bill：将部分Bill类抽象接口置入Commodity类，这样Bill单向依赖于Commodity

8） 在logic层中，初始化和业务逻辑层上下文的工作被分配到utilitybl包中。

 ###  4.1开发包图

进销存系统的最终开发包图的设计如表1所示

##### 表1   进销存管理系统的最终开发包设计

| 开发（物理）包              | 依赖的其他开发包                                 |
| -------------------- | ---------------------------------------- |
| mainui               | salesui，commdityui，memberui，promotionui，userui，accountui，tableui，billui，vo |
| salesui              | salesblservice,界面类库包,vo                  |
| salesblservice       |                                          |
| salesbl              | salesblservice，salesdataservice，po，userbl，promotionbl，commoditybl,logbl |
| salesdataservice     | Java RMI，po                              |
| salesdata            | databaseutility，po，salesdataservice      |
| commodityui          | commodityblservice，界面类库包                 |
| commodityblservice   |                                          |
| commoditybl          | commodityblservice，commoditydataservice，po，billbl,logbl |
| commoditydataservice | Java RMI，po                              |
| commoditydata        | Java RMI，po，databaseutility              |
| memberui             | memberblservice，界面类库包                    |
| memberblservice      |                                          |
| memberbl             | memberblservice，memberdataservice，po，commditybl， billbl,logbl |
| memberdataservice    | Java RMI，po                              |
| memberdata           | Java RMI，po，databaseutility              |
| promotionui          | promotionblservice，界面类库包                 |
| promotionblservice   |                                          |
| promotionbl          | promotionblservice，promotiondataservice，commditybl，memberbl， vo,logbl |
| promotiondataservice | Java RMI，po                              |
| promotiondata        | Java RMI，po，databaseutility              |
| userui               | userblservice，界面类库包                      |
| userblservice        |                                          |
| userbl               | Userinterface，Userdataclient，Userpo,logbl |
| userdataservice      | Java RMI，po                              |
| userdata             | RMI，po，databaseutiity                    |
| accountui            | accountblservice，界面类库包                   |
| accountblservice     |                                          |
| accountbl            | accountblservice，accountdataservice，po， billbl,logbl |
| accountdataservice   | Java RMI，po                              |
| accountdata          | Java RMI，po，databaseutility              |
| tableui              | tableblservice，界面类库包                     |
| tableblservice       |                                          |
| tablebl              | tableblservice，tabledataservice，po，billbl，commoditybl,logbl |
| tabledataservice     | Java RMI，po                              |
| tabledata            | Java RMI，po，databaseutility              |
| billui               | billblservice，界面类库包                      |
| billblservice        |                                          |
| billbl               | billblservice，billdataservice，po，salebl,logbl |
| billdataservice      | Java RMI，po                              |
| billdata             | Java RMI，po，databaseutility              |
| logui                | logbl,界面类库包                              |
| logbl                | logdataservice,logblservice              |
| logdata              | Java RMI,po                              |
| logdataservice       | Java RMI，po，databaseutility              |
| vo                   |                                          |
| po                   |                                          |
| utilitybl            |                                          |
| 界面类库包                |                                          |
| Java RMI             |                                          |
| databaseutility      | JDBC                                     |

进销存管理系统客户端开发包图如图3所示，服务器端开发包图如图4所示。

### 4.2运行时进程

​	在进销存管理系统中，会有多个客户端进程和一个服务器进程，其进程图如文档外进程图（图5）所示。结合部署图，客户端进程是在客户端机器上运行，服务器进程在服务器端机器上运行。

### 4.3物理部署

进销存管理系统中客户端构件是放在客户端机器上，服务器端构件是放在服务器机器上。在客户端节点上，还要部署RMIStub构件。由于Java RMI构件属于JDK 6.0 的一部分。所以，在系统JDK环境已经设置好的情况下，不需要再独立部署。部署图如文档外部署图（图6）所示。

##5.接口视角

### 5.1模块的职责

客户端模块和服务器模块视图如文档外模块视图(图7 图8)所示

客户端各层和服务器各层的职责分别如表2和表3所示



#####                                                                                              表2 客户端各层的职责

|    层    |                  职责                  |
| :-----: | :----------------------------------: |
|  启动模块   |          负责初始化网路通信机制，启动用户界面          |
|  用户界面层  |          基于窗口的进销存系统客户端用户界面           |
|  业务逻辑层  |        对于用户界面的输入进行响应并进行业务处理逻辑        |
| 客户端网络模块 | 利用Java RMI机制查找RMI服务，，检测网络连接状态，进行短线重连 |



#####                                                                                             表3 服务器端各层的职责

|    层     |             职责              |
| :------: | :-------------------------: |
|   启动模块   |     负责初始化网路通信机制，启动用户界面      |
|   数据层    |      负责数据的持久化以及数据访问接口       |
| 服务器端网络模块 | 利用Java RMI机制查找RMI服务，注册RMI服务 |

每层只是使用下方直接接触的层。层与层之间仅仅是通过接口的调用来完成的。层之间调用的接口如表4所示。

##### 表4 层之间调用的接口

| 接口                                       | 服务调用方    | 服务提供方    |
| ---------------------------------------- | -------- | -------- |
| userblservice<br>saleblservice<br>memberblservice<br>commodityblservice<br>promotionblservice<br>tableblservice<br>billblservice<br>accountblservice | 客户端展示层   | 客户端业务逻辑层 |
| userdataservice<br>saledataservice<br>memberdataservice<br>commoditydataservice<br>promotiondataservice<br>tabledataservice<br>billdataservice<br>accountdataservice<br>datafactoryservice | 客户端业务逻辑层 | 服务器端数据层  |

借用库存管理用例来说明层与层之间的调用，如文档外图“库存管理层与层之间调用的接口”（图9）所示。每一层之间都是由上层依赖了一个接口（需接口),而下层实现了这个接口（供接口）。CommodityBlService提供了Commodity界面所需要的业务逻辑功能。CommodityDataService提供了对数据库的增删查改等操作。这样的实现就大大降低了层与层之间的耦合度。

### 5.2用户界面层的分解

根据需求，系统存在27个用户界面，界面跳转如图10所示。

服务器端和客户端用户界面设计接口一直，只是具体界面不一样。用户界面类如图11所示。

####5.2.1用户界面层模块的职责

如表5所示为用户界面层模块职责。

##### 表5 用户界面层模块职责

| 模块                   | 职责                     |
| -------------------- | ---------------------- |
| MainFrame            | 界面Frame，负责界面的显示和界面的跳转  |
| SaleMainPanel        | 负责销售活动界面的显示和销售相关界面间的跳转 |
| MemberPanel          | 负责客户管理界面的显示            |
| ImportPanel          | 负责进货（制定进货单据）界面的显示      |
| Import_ReturnPanel   | 负责进货退货界面的显示（制定进货单据）    |
| SalePanel            | 负责销售界面的显示（制定销售单据）      |
| Sale_ReturnPanel     | 负责销售退货界面的显显示（制定销售退货单）  |
| StockMainPanel       | 负责库存界面的显示和库存相关界面间的跳转   |
| CategoryPanel        | 负责商品分类界面的显示            |
| CommodityPanel       | 负责商品信息界面的显示            |
| StockWarningPanel    | 负责库存报警单界面的显示（生成库存报警单）  |
| StockCheckPanel      | 负责库存查看界面的显示            |
| StockInventoryPanel  | 负责库存盘点界面的显示            |
| StockPresentPanel    | 负责库存赠送单界面的显示           |
| FinanceMainPanel     | 负责财务活动的显示和财务相关的界面的跳转   |
| Pay/GetBillPanel     | 负责制定收付款单界面的显示          |
| SaleDetailsPanel     | 负责查看销售明细表界面的显示         |
| ManageCoursePanel    | 负责查看经营历程表界面的显示         |
| ManageSituationPanel | 负责查看经营情况表界面的显示         |
| AccountPanel         | 负责管理银行账户界面的显示          |
| RedPanel             | 负责对账单进行红冲界面的显示         |
| ManagerMainPanel     | 负责总经理活动的显示和其相关界面的跳转    |
| StrategyPanel        | 负责制定促销策略界面的显示          |
| ExaminePanel         | 负责审批单据界面的显示            |
| AdministratorPanel   | 负责管理员活动界面的显示和其相关界面的跳转  |
| UserChangePanel      | 负责修改用户界面的显示            |
| AccountBookPanel     | 负责期初建账界面的显示            |
| LogPanel             | 负责日志查看界面的显示            |




####5.2.2 用户界面层模块的接口规范

用户界面层模块的接口规范如表6所示。

##### 表6 用户界面层模块接口规范

MainFrame：

| 语法   | init（args：String[]） |
| ---- | ------------------- |
| 前置条件 | 无                   |
| 后置条件 | 显示Frame以及LoginPanel |


SaleMainUI:

| 语法   | init（args：String[]）      |
| ---- | ------------------------ |
| 前置条件 | 销售进货人员登录                 |
| 后置条件 | 显示销售人员主界面（SaleMainPanel） |

MemberUI:

| 语法   | init（args：String[]）   |
| ---- | --------------------- |
| 前置条件 | 进货销售人员选择管理客户          |
| 后置条件 | 显示客户管理界面（MemberPanel） |

ImportUI:

| 语法   | init（args：String[]）      |
| ---- | ------------------------ |
| 前置条件 | 销售进货人员选择制定进货单据           |
| 后置条件 | 显示销售界面（制定销售单据）(ImportUI) |

Import_ReturnUI:

| 语法   | init（args：String[]）           |
| ---- | ----------------------------- |
| 前置条件 | 进货销售人员选择进货退货                  |
| 后置条件 | 显示制定进货退货单据界面（Import_ReturnUI） |

SaleUI:
| 语法   | init（args：String[]） |
| ---- | ------------------- |
| 前置条件 | 进货销售人员选择销售          |
| 后置条件 | 显示制定销售单据界面（SaleUI）  |

Sale_ReturnUI:
| 语法   | init（args：String[]）        |
| ---- | -------------------------- |
| 前置条件 | 进货销售人员选择销售退货               |
| 后置条件 | 显示制定销售退货单界面（Sale_ReturnUI） |

StockMainUI:

| 语法   | init（args：String[]）         |
| ---- | --------------------------- |
| 前置条件 | 库存管理人员登录                    |
| 后置条件 | 显示库存管理人员主界面（StockMainPanel） |

CategoryUI:

| 语法   | init（args：String[]）     |
| ---- | ----------------------- |
| 前置条件 | 库存管理人员人员选择商品分类          |
| 后置条件 | 显示商品分类界面（CategoryPanel） |

CommodityUI:

| 语法   | init（args：String[]）      |
| ---- | ------------------------ |
| 前置条件 | 库存管理人员选择商品信息             |
| 后置条件 | 显示商品信息界面(CommodityPanel) |

 StockWarningUI:

| 语法   | init（args：String[]）             |
| ---- | ------------------------------- |
| 前置条件 | 系统中某些商品数量低于警戒值                  |
| 后置条件 | 显示制定库存报警单界面（ StockWarningPanel） |

StockCheckUI:
| 语法   | init（args：String[]）         |
| ---- | --------------------------- |
| 前置条件 | 库存管理人员选择库存查看                |
| 后置条件 | 显示制定库存查看界面（StockCheckPanel） |

StockInventoryUI:
| 语法   | init（args：String[]）     |
| ---- | ----------------------- |
| 前置条件 | 库存管理人员选择库存盘点            |
| 后置条件 | 显示库存盘点界面（Sale_ReturnUI） |

StockPresentUI:
| 语法   | init（args：String[]）          |
| ---- | ---------------------------- |
| 前置条件 | 包含了赠品的促销策略被应用                |
| 后置条件 | 显示库存赠送单界面（StockPresentPanel） |

FinanceMainUI

| 语法   | init(args:String[])         |
| ---- | --------------------------- |
| 前置条件 | 财务人员登录                      |
| 后置条件 | 显示销售人员主界面（FinanceMainPanel） |

Pay/GetBillUI

| 语法   | init(args:String[])            |
| ---- | ------------------------------ |
| 前置条件 | 财务人员选择制定收付款单                   |
| 后置条件 | 显示制定首付款单据的界面（Pay/GetBillPanel） |

SaleDetailsUI

| 语法   | init(args:String[])            |
| ---- | ------------------------------ |
| 前置条件 | 财务人员/总经理选择查看销售明细表              |
| 后置条件 | 显示销售明细表界面的界面（SaleDetailsPanel） |

ManageCourseUI

| 语法   | init(args:String[])           |
| ---- | ----------------------------- |
| 前置条件 | 财务人员/总经理选择查看经营历程表             |
| 后置条件 | 显示经营历程表的界面（ManageCoursePanel） |

ManageSituationUI

| 语法   | init(args:String[])              |
| ---- | -------------------------------- |
| 前置条件 | 财务人员/总经理选择查看经营情况表                |
| 后置条件 | 显示经营情况表的界面（ManageSituationPanel） |

AccountUI

| 语法   | init(args:String[])       |
| ---- | ------------------------- |
| 前置条件 | 财务人员选择管理银行账户              |
| 后置条件 | 显示银行账户管理的界面（AccountPanel） |

RedUI

| 语法   | init(args:String[])  |
| ---- | -------------------- |
| 前置条件 | 财务人员进入查看经营历程表的界面选择红冲 |
| 后置条件 | 显示红冲的界面（RedPanel）    |


ManagerMainUI

| 语法   | init(args:String[])         |
| ---- | --------------------------- |
| 前置条件 | 总经理登录                       |
| 后置条件 | 显示总经理的主界面（ManagerMainPanel） |

StrategyUI

| 语法   | init(args:String[])        |
| ---- | -------------------------- |
| 前置条件 | 总经理选择制定促销策略                |
| 后置条件 | 显示制定促销策略的界面（StrategyPanel） |

ExamineUI

| 语法   | init(args:String[])     |
| ---- | ----------------------- |
| 前置条件 | 总经理选择审批单据               |
| 后置条件 | 显示审批单据的界面（ExaminePanel） |

AdministratorMainUI

| 语法   | init(args:String[])              |
| ---- | -------------------------------- |
| 前置条件 | 管理员已登录                           |
| 后置条件 | 显示管理员主界面（AdministratorMainPanel） |

UserChangeUI

| 语法   | init(args:String[])        |
| ---- | -------------------------- |
| 前置条件 | 管理员选择用户管理                  |
| 后置条件 | 显示用户管理的界面（UserChangePanel） |

AccountBookUI

| 语法   | init(args:String[])         |
| ---- | --------------------------- |
| 前置条件 | 财务人员选择期初建账                  |
| 后置条件 | 显示期初建账的界面（AccountBookPanel） |

LogUI

| 语法   | init(args:String[]) |
| ---- | ------------------- |
| 前置条件 | 管理员或总经理选择查看操作日志     |
| 后置条件 | 显示操作日志的界面（LogPanel） |

用户界面所需的服务接口如表7所示

##### 表7 用户界面层模块所需的服务接口

| 服务名                                      | 服务                |
| ---------------------------------------- | ----------------- |
| businesslogicservice.LoginBLService      | 登录界面的业务逻辑接口       |
| businesslogicservice.SaleMainBLService   | 销售人员主界面业务逻辑接口     |
| businesslogicservice.MemberBLService     | 客户管理界面的业务逻辑接口     |
| businesslogicservice.ImportBLService     | 进货界面的业务逻辑接口       |
| businesslogicservice.Import_ReturnBLService | 进货退货界面的业务逻辑       |
| businesslogicservice.SaleBLService       | 销售界面的业务逻辑接口       |
| businesslogicservice.Sale_ReturnBLService | 销售退货界面的业务逻辑接口     |
| businesslogicservice.StockMainBLService  | 库存管理人员主界面业务逻辑接口   |
| businesslogicservice.CommodityBLService  | 商品信息界面的业务逻辑接口     |
| businesslogicservice.CategoryBLService   | 商品分类界面的业务逻辑接口     |
| businesslogicservice.StockWarningBLService | 库存报警单界面的业务逻辑接口    |
| businesslogicservice.StockCheckService   | 库存查看界面的业务逻辑接口     |
| businesslogicservice.StockInventoryBLService | 库存盘点界面的业务逻辑接口     |
| businesslogicservice.StockPresentBLService | 库存赠送单界面的业务逻辑接口    |
| businesslogicservice.Pay/GetBillBLService | 制定收付款单界面业务逻辑接口    |
| businesslogicservice.SaleDetailsBLService | 查看销售明细表界面界面业务逻辑接口 |
| businesslogicservice.ManageCourseBLService | 查看经营历程表界面业务逻辑接口   |
| businesslogicservice.ManageSituationBLService | 查看经营情况界面业务逻辑接口    |
| businesslogicservice.AccountBLService    | 银行账户管理界面业务逻辑接口    |
| businesslogicservice.RedBLService        | 红冲界面业务逻辑接口        |
| businesslogicservice.ManagerMainBLService | 总经理主界面业务逻辑接口      |
| businesslogicservice.StrategyBLService   | 制定促销策略界面业务逻辑接口    |
| businesslogicservice.ExamineBLService    | 审批单据界面业务逻辑接口      |
| businesslogicservice.AdministratorBLService | 管理员主界面业务逻辑接口      |
| businesslogicservice.UserChangeBLService | 用户管理界面业务逻辑接口      |
| businesslogicservice.AccountBookBLService | 期初建账界面业务逻辑接口      |
| businesslogicservice.LogBLService        | 日志查看界面业务逻辑接口      |

#### 5.2.3 用户界面模块设计原理

用户界面利用Java的JavaFx库来实现。

### 5.3 业务逻辑层的分解

业务逻辑层包括多个针对界面的业务逻辑处理对象。例如，User对象负责处理登录界面的业务逻辑；Sales对象负责销售界面的业务逻辑。业务逻辑层的设计如文档外“业务逻辑层的设计”（图12）所示。

####5.3.1 业务逻辑层模块的职责

业务逻辑层模块的职责如表8所示

##### 表8 业务逻辑层模块的职责

| 模块          | 职责                   |
| ----------- | -------------------- |
| salebl      | 负责实现销售进货人员界面所需要的服务   |
| userbl      | 负责实现用户管理界面与登录界面所需的服务 |
| commoditybl | 负责实现库存管理与商品管理界面所需的服务 |
| tablebl     | 负责实现表格查看界面所需的服务      |
| billbl      | 负责实现表单制定与查看界面所需的服务   |
| accountbl   | 负责实现银行账户管理界面所需的服务    |
| memberbl    | 负责实现客户管理界面所需的服务      |
| promotionbl | 负责实现制定促销策略界面所需的服务    |
| logbl       | 负责实现查看日志界面所需要的服务     |

#### 5.3.2 业务逻辑层模块的接口规范

业务逻辑层模块的接口规范如表9所示

##### 表9 业务逻辑层模块的接口规范



##### commoditybl模块的接口规范

提供的服务（供接口）

Commodity.getCommodityList

| 语法   | public ArrayList<Commodity> getCommodityList(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 查询关键字正确或选择了某个门类或选择查看库存，库存管理人员已登录         |
| 后置条件 | 获返回商品列表信息                                |

Commodity.getCommodity

| 语法   | public CommodityVO getCommodity(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 选择查询某个具体商品或查询关键字正确，库存管理人员已登录             |
| 后置条件 | 返回商品信息                                   |

Commodity.getCategoryList

| 语法   | public ArrayList<Category> getCategory() |
| ---- | ---------------------------------------- |
| 前置条件 | 选择进入商品分类管理界面，库存管理人员已登录                   |
| 后置条件 | 返回分类列表信息                                 |

Commodity.addCommodity

| 语法   | public ResultMessage addCommodity(CommodityVO c) |
| ---- | ---------------------------------------- |
| 前置条件 | 选择新增商品且商品信息填写完整且符合要求，库存管理人员已登录           |
| 后置条件 | 新增商品并将其作为持久化对象插入数据库，返回维护结果               |

Commodity.addCategory

| 语法   | public ResultMessage addCategory(CategoryVO c) |
| ---- | ---------------------------------------- |
| 前置条件 | 选择新增分类，分类信息填写完整，库存管理人员已登录                |
| 后置条件 | 新增分类并将其作为持久化对象插入数据库，返回维护结果               |

Commodity.deleteCommodity
| 语法   | public ResultMessage deleteCommodity(CommodityVO c) |
| ---- | ---------------------------------------- |
| 前置条件 | 选择删除商品，库存管理人员已登录                         |
| 后置条件 | 删除商品并从数据库中删除单一持久化对象，返回维护结果               |


Commodity.deleteCategory

| 语法   | public ReaultMessage deleteCategory(CategoryVO c) |
| ---- | ---------------------------------------- |
| 前置条件 | 选择删除分类，库存管理人员已登录                         |
| 后置条件 | 删除分类并从数据库中删除单一持久化对象，返回维护结果               |

Commodity.modifyCommodity

| 语法   | public ResultMessage modifyCommodity(CommodityVO c) |
| ---- | ---------------------------------------- |
| 前置条件 | 选择修改商品，库存管理人员已登录                         |
| 后置条件 | 更新商品并从数据库中更新单一持久化对象，返回维护结果               |


Commodity.modifyCategory

| 语法   | public ResultMessage  modifyCategory(CategoryVO c) |
| ---- | ---------------------------------------- |
| 前置条件 | 选择修改分类，库存管理人员已登录                         |
| 后置条件 | 更新分类并从数据库中更新单一持久化对象，返回维护结果               |

需要的接口（需接口）

| 服务名                                      | 服务                   |
| ---------------------------------------- | -------------------- |
| CommodityDataService.find(int id)        | 根据ID查找单一持久化对象        |
| CommodityDataService.finds(String field,int value) | 根据字段名称和值查找多个持久化对象    |
| CommodityDataService.insert(CommodityPO po) | 插入单一持久化对象            |
| CommodityDataService.delete(CommodityPO p) | 删除单一持久化对象            |
| CommodityDataService.update(CommodityPO p) | 更新单一持久化对象            |
| DatabaseFactory.getCommodityDatabase     | 得到Commodity数据库的服务的引用 |

##### accountbl模块的接口规范

提供的服务（供接口）

Account.getAccount

| 语法   | public AccountPO getAccount(long id) |
| ---- | ------------------------------------ |
| 前置条件 | 选择查看某具体银行账户信息，财务人员已登录                |
| 后置条件 | 返回账户信息                               |

Account.addAccount

| 语法   | public ResultMessage addAccount(AccountVO account) |
| ---- | ---------------------------------------- |
| 前置条件 | 选择增加银行账户信息，财务人员已登录                       |
| 后置条件 | 增加账户信息，向数据库插入单一持久化对象，返回维护结果              |

Account.deleteAccount

| 语法   | public ResultMessage deleteAccount(AccountVO account) |
| ---- | ---------------------------------------- |
| 前置条件 | 选择删除银行账户信息，财务人员已登录                       |
| 后置条件 | 删除账户信息，从数据库删除单一持久化对象，返回维护结果              |

Account.modifyAccount
| 语法   | public ResultMessage modifyAccount(long id) |
| ---- | ---------------------------------------- |
| 前置条件 | 选择更新银行账户信息，财务人员已登录                       |
| 后置条件 | 更新账户信息，从数据库更新单一持久化对象，返回维护结果              |

Account.getAccountList

| 语法   | public AccountListPO getAccountList(long id,String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 选择查看账户列表，财务人员已登录                         |
| 后置条件 | 返回账户列表信息                                 |

需要的接口（需接口）

| 服务名                                      | 服务                   |
| ---------------------------------------- | -------------------- |
| AccountDataService.find(int id)          | 根据ID查找单一持久化对象        |
| AccountDataService.finds(String field,int value) | 根据字段名称和值查找多个持久化对象    |
| AccountDataService.insert(CommodityPO po) | 插入单一持久化对象            |
| AccountDataService.delete(CommodityPO p) | 删除单一持久化对象            |
| AccountDataService.update(CommodityPO p) | 更新单一持久化对象            |
| DatabaseFactory.getCommodityDatabase     | 得到Commodity数据库的服务的引用 |

##### salebl模块的接口规范

Sale.import

| 语法   | public void import() |
| ---- | -------------------- |
| 前置条件 | 选择进货，进货销售人员已登录       |
| 后置条件 | 进货单信息                |

Sale.importReturn

| 语法   | public void importReturn() |
| ---- | -------------------------- |
| 前置条件 | 选择进货退货，进货销售人员已登录           |
| 后置条件 | 返回进货退货单信息                  |

Sale.sell

| 语法   | public void sell() |
| ---- | ------------------ |
| 前置条件 | 选择销售，进货销售人员已登录     |
| 后置条件 | 返回销售单信息            |

Sale.sellReturn

| 语法   | public void sellReturn() |
| ---- | ------------------------ |
| 前置条件 | 选择销售退货，进货销售人员已登录         |
| 后置条件 | 返回销售退货单信息                |

Sale.getPromotion

| 语法   | public PromotionVO getPromotion() |
| ---- | --------------------------------- |
| 前置条件 | 存在促销策略，进货销售人员已登录                  |
| 后置条件 | 返回促销策略信息                          |

Sale.getMember

| 语法   | public MemberVO getMember(String name) |
| ---- | -------------------------------------- |
| 前置条件 | 进货销售人员已登录，并选择了四种进销活动之一                 |
| 后置条件 | 返回客户信息                                 |

Sale.getCommodity

| 语法   | public CommodityVO getMember(int id) |
| ---- | ------------------------------------ |
| 前置条件 | 进货销售人员已登录，并选择了四种进销活动之一               |
| 后置条件 | 返回商品信息                               |



需要的接口（需接口）

| 服务名                               | 服务              |
| --------------------------------- | --------------- |
| CommodityDataService.find(int id) | 根据ID查找商品        |
| MemeberDataService.find(int id)   | 根据ID查找客户        |
| SaleDataService.insert(SalePO po) | 插入单一持久化对象       |
| DatabaseFactory.getSaleDatabase   | 得到Sale数据库的服务的引用 |

##### promotionbl模块的接口规范

提供的服务（供接口）

Promotion.addPromotion

| 语法   | public ResultMessage addPromotion() |
| ---- | ----------------------------------- |
| 前置条件 | 选择新增促销策略，总经理已登录                     |
| 后置条件 | 增加策略信息，向数据库插入单一持久化对象，返回维护结果         |


Promotion.deletePromotion

| 语法   | public ResultMessage deletePromotion() |
| ---- | -------------------------------------- |
| 前置条件 | 选择停用促销策略，总经理已登录                        |
| 后置条件 | 删除账户信息，向数据库删除单一持久化对象，返回维护结果            |

Promotion.getPromotion

| 语法   | public PromotionVO getPromotion() |
| ---- | --------------------------------- |
| 前置条件 | 选择查看促销策略，总经理已登录                   |
| 后置条件 | 返回策略信息                            |

Promotion.getPromotinoList
| 语法   | public Promotion getPromotinoList() |
| ---- | ----------------------------------- |
| 前置条件 | 选择查看全部促销策略，总经理已登录                   |
| 后置条件 | 返回全部促销策略                            |


需要的接口（需接口）

| 服务名                                      | 服务            |
| ---------------------------------------- | ------------- |
| CommodityDataService.find(int id)        | 根据ID查找单一持久化对象 |
| PromotionDataService.insert(CommodityPO po) | 插入单一持久化对象     |
| PromotionDataService.delete(CommodityPO p) | 删除单一持久化对象     |

##### memberbl模块的接口规范

提供的服务（供接口）

Member.addMember

| 语法   | piblic MemberVO addmember (MemberVO a) |
| ---- | -------------------------------------- |
| 前置条件 | 进货销售人员已登录                              |
| 后置条件 | 增添一个客户信息                               |

Member.deleteMember

| 语法   | piblic MemberVO deletemember (MemberVO a) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 删除一个客户信息                                 |

Member.findMember

| 语法   | piblic MemberVO findmember (MemberVO a) |
| ---- | --------------------------------------- |
| 前置条件 | 输入的关键词正确，进货销售人员已登录                      |
| 后置条件 | 显示查询客户的信息                               |

Member.updateMember

| 语法   | piblic MemberVO findmember (MemberVO a) |
| ---- | --------------------------------------- |
| 前置条件 | 此客户存在，进货销售人员已登录                         |
| 后置条件 | 更改客户的信息                                 |

需要的服务（需接口）

| 服务名                                      | 服务                |
| ---------------------------------------- | ----------------- |
| MemberDataService.find(int id)           | 根据客户编号进行查找单一持久化对象 |
| MemberDataService.find(String field,String content) | 根据字段名和值查找多个持久化对象  |
| MemberDataService.insert(MemberPO po)    | 插入单一持久化对象         |
| MemberDataService.delete(MemberPO po)    | 删除单一持久化对象         |
| MemberDataService.update(MemberPO po)    | 更新单一持久化对象         |
| MemberDataService.getSalesDatabase       | 得到Member数据库的服务的引用 |
| MemberDataService.insert(MemberPO po)    | 在数据库中插入MemberPO对象 |



##### tablebl模块的接口规范

提供的服务（供接口）

Table.SaleDetails

| 语法   | public SaleDetailsTableVO getSaleDetailsTable(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 筛选条件选择，财务人员/总经理已登录                       |
| 后置条件 | 返回符合筛选条件的信息                              |

Table.MangeCourse

| 语法   | public MangeCourseTableVO getMangeCourseTable(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 筛选条件选择，财务人员/总经理已登录                       |
| 后置条件 | 返回符合筛选条件的信息                              |

Table.MangeSituation

| 语法   | public MangeSituationTableVO getMangeSituationTable(String field) |
| ---- | ---------------------------------------- |
| 前置条件 | 筛选条件选择，财务人员/总经理已登录                       |
| 后置条件 | 返回符合筛选条件的信息                              |

Table.MangeCourse.Red

| 语法   | public BillVO getMangeSituationTable(BillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 财务人员在查看经营历程表选择具体单据，财务人员已登录               |
| 后置条件 | 返回修改后的单据                                 |

需要的服务（需接口）

| 服务名                                 | 服务               |
| ----------------------------------- | ---------------- |
| tableDataService.find(String field） | 根据字段名查找多个持久化对象   |
| tableDataService.clone(tablePO po)  | 复制单一持久化对象并修改数值   |
| tableDataService.gettableDatabase   | 得到table数据库的服务的引用 |
| tableDataService.insert(tablePO po) | 在数据库中插入tablePO对象 |
| tableDataService.getbillDatabase    | 得到Bill数据库的服务的引用  |



##### userbl模块的接口规范

提供的服务（供接口）

User.addUser

| 语法   | piblic UserVO addUser (UserVO a) |
| ---- | -------------------------------- |
| 前置条件 | 管理员已登录                           |
| 后置条件 | 增添一个用户信息                         |

User.deleteUser

| 语法   | piblic UserVO deleteUser (UserVO a) |
| ---- | ----------------------------------- |
| 前置条件 | 管理员已登录                              |
| 后置条件 | 删除一个用户信息                            |

User.findUser

| 语法   | piblic UserVO findUser (UserVO a) |
| ---- | --------------------------------- |
| 前置条件 | 输入的关键词正确，管理员已登录                   |
| 后置条件 | 显示查询用户的信息                         |

User.updateUser

| 语法   | piblic UserVO findUser (UserVO a) |
| ---- | --------------------------------- |
| 前置条件 | 此用户存在，管理员已登录                      |
| 后置条件 | 更改用户的信息                           |

需要的服务（需接口）

| 服务名                                      | 服务                |
| ---------------------------------------- | ----------------- |
| UserDataService.find(int id)             | 根据客户编号进行查找单一持久化对象 |
| UserDataService.find(String field,String content) | 根据字段名和值查找多个持久化对象  |
| UserDataService.insert(UserPO po)        | 插入单一持久化对象         |
| UserDataService.delete(UserPO po)        | 删除单一持久化对象         |
| UserDataService.update(UserPO po)        | 更新单一持久化对象         |
| UserDataService.getUserDatabase          | 得到User数据库的服务的引用   |
| UserDataService.insert(UserPO po)        | 在数据库中插入UserPO对象   |

##### billbl模块的接口规范

提供的服务（供接口）

Bill.makeImportbill

| 语法   | public ImportbillPO makeImportbill（ImportbillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 生成进货单                                    |

Bill.makeImport_Returnbill

| 语法   | public ExportbillPO makeImport_Returnbill（ExportbillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 生成进货退货单                                  |

Bill.makeSalebill

| 语法   | public SalebillPO makeSalebill（SalebillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 生成销售单                                    |

Bill.makeSale_Returnbill

| 语法   | public SaleexportbillPO makeSale_Returnbill（SaleexportbillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 进货销售人员已登录                                |
| 后置条件 | 生成销售退货单                                  |

bill.makePaybill

| 语法   | public PaybillPO makePaybill（PaybillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 财务人员已登录                                  |
| 后置条件 | 生成付款单                                    |

Bill.makeGetbill

| 语法   | public GetbillPO makeGetbill（GetbillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 财务人员已登录                                  |
| 后置条件 | 生成收款单                                    |

Bill.makeGiftbill

| 语法   | public GiftbillPO makeGiftbill（GiftbillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 库存管理人员选择商品进行赠送，库存管理人员已登录                 |
| 后置条件 | 生成库存赠送单                                  |

Bill.makeOverbill

| 语法   | public OverbillPO makeOverbill(OverbillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 实际库存比系统中的多，库存管理人员已登录                     |
| 后置条件 | 生成库存报溢单                                  |

Bill.makeWarningbill

| 语法   | public WarningbillPO makeWarningbill(WarningbillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 库存数量低于警戒线，库存管理人员已登录                      |
| 后置条件 | 生成库存报警单                                  |

Bill.makeCashbill

| 语法   | public CashbillPO makeCashbill(CashbillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 财务人员已登录                                  |
| 后置条件 | 生成现金费用单                                  |

bill.makeDamagebill

| 语法   | public DamagebillPO makeDamagebill(DamagebillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 实际库存比系统中的少，库存管理人员已登录                     |
| 后置条件 | 生成库存报溢单                                  |

bill.conveyBill

| 语法   | public ResultMessage conveyBill(BillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 完成单据制定或审批                                |
| 后置条件 | 将单据推送给目标人员                               |

bill.checkBill

| 语法   | public ResultMessage checkMessage(BillVO vo) |
| ---- | ---------------------------------------- |
| 前置条件 | 实际库存比系统中的少，库存管理人员已登录                     |
| 后置条件 | 生成库存报溢单                                  |

需要的服务（需接口）

| 服务名                                 | 服务                  |
| ----------------------------------- | ------------------- |
| BillDataService.insert(UserPO po)   | 插入单一持久化对象           |
| BillDataService.delete(UserPO po)   | 删除单一持久化对象           |
| BillDataService.update(UserPO po)   | 更新单一持久化对象           |
| BillDataService.getCommdityDatabase | 得到Commdity数据库的服务的引用 |
| BillDataService.getUserDatabase     | 得到User数据库的服务的引用     |
| BillDataService.getBillDatabase     | 得到Bill数据库的服务的引用     |
| BillDataService.getMemberDatabase   | 得到Member数据库的服务的引用   |

##### logbl模块的接口规范

提供的服务（供接口）

log.addRecord
| 语法   | public void addRecord(LogPO po) |
| ---- | ------------------------------- |
| 前置条件 | 用户进行了某项操作                       |
| 后置条件 | 记录操作的持久化数据对象到数据库                |

需要的服务（需接口）

| 服务名                              | 服务            |
| -------------------------------- | ------------- |
| LogDataService.find(int id)      | 根据ID查找单一持久化对象 |
| LogDataService.insert(UserPO po) | 插入单一持久化对象     |
| LogDataService.delete(UserPO po) | 删除单一持久化对象     |
| LogDataService.update(UserPO po) | 更新单一持久化对象     |
| LogDataService.getLogDatabase    | 得到数据库的服务的引用   |

### 5.4数据层的分解

​	数据层主要给业务逻辑层提供数据访问服务，包括对持久化数据的增删查改。例如Sale业务逻辑所需要的服务由SaleDataService接口提供。由于持久化数据的保存可能存在多种形式：Txt问文件，序列化文件，数据库等，所示抽象了数据服务。数据层模块的描述具体如图13。

#### 5.4.1数据层模块的职责

数据层模块的职责如表所示

| 模块                      | 职责                                  |
| ----------------------- | ----------------------------------- |
| DataService             | 持久化数据库的接口，提供集体载入、集体保存、增删查改的功能       |
| DataServiceTxtFileImpl  | 基于Txt文件的持久化数据接口，提供集体载入、集体保存、增删查改的功能 |
| DataServiceDatabaseImpl | 基于数据库的持久化数据接口，提供集体载入、集体保存、增删查改的功能   |

#### 5.4.1数据层模块的职责

数据层模块的职责如表11所示
##### 表11 数据层模块的职责
| 模块                      | 职责                                  |
| ----------------------- | ----------------------------------- |
| DataService             | 持久化数据库的接口，提供集体载入、集体保存、增删查改的功能       |
| DataServiceTxtFileImpl  | 基于Txt文件的持久化数据接口，提供集体载入、集体保存、增删查改的功能 |
| DataServiceDatabaseImpl | 基于数据库的持久化数据接口，提供集体载入、集体保存、增删查改的功能   |

#### 5.4.2数据层模块的接口规范
数据层模块的接口规范如表12所示
##### 表12 数据层模块的接口规范
MemberDataService.find
| 语法   | public MemberPO find(long id) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 按id进行查找返回响应的MemberPO结果                   |

MemberDataService.find

| 语法   | public MemberPO find(String name) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 按姓名进行查找返回响应的MemberPO结果                   |

MemberDataService.insert

| 语法   | public void insert(MemberPO po) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样id的po在Mapper中不存在                       |
| 后置条件 | 在数据库中增加一个po记录                            |

MemberDataService.delete

| 语法   | public void delete(MemberPO po) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 数据库中存在同样id的po                            |
| 后置条件 | 删除一个po                                   |

MemberDataService.update

| 语法   | public void update(MemberPO po) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 数据库中存在同样id的po                            |
| 后置条件 | 更新一个po                                   |

MemberDataService.init

| 语法   | public void init() throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 初始化持久化数据库                                |

MemberDataService.finish

| 语法   | public void finish() throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 结束持久化数据库的使用                              |

AccountDataService.find

| 语法   | public AccountPO find(long id) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 按id进行查找返回响应的AccountPO结果                  |

AccountDataService.insert

| 语法   | public void insert(AccountPO po) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样id的po在Mapper中不存在                       |
| 后置条件 | 在数据库中增加一个po记录                            |

AccountDataService.delete

| 语法   | public void delete(AccountPO po) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 数据库中存在同样id的po                            |
| 后置条件 | 删除一个po                                   |

AccountDataService.update

| 语法   | public void update(AccountPO po) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 数据库中存在同样id的po                            |
| 后置条件 | 更新一个po                                   |

AccountDataService.init

| 语法   | public void init() throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 初始化持久化数据库                                |

AccountDataService.finish

| 语法   | public void finish() throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 结束持久化数据库的使用                              |

UserDataService.find

| 语法   | public UserPO find(long id) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 按id进行查找返回响应的UserPO结果                     |

UserDataService.find

| 语法   | public UserPO find(String name) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 按员工姓名进行查找返回响应的UserPO结果                   |

UserDataService.insert

| 语法   | public void insert(UserPO po) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样id的po在Mapper中不存在                       |
| 后置条件 | 在数据库中增加一个po记录                            |

UserDataService.delete

| 语法   | public void delete(UserPO po) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 数据库中存在同样id的po                            |
| 后置条件 | 删除一个po                                   |

UserDataService.update

| 语法   | public void update(UserPO po) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 数据库中存在同样id的po                            |
| 后置条件 | 更新一个po                                   |

UserDataService.init

| 语法   | public void init() throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 初始化持久化数据库                                |

UserDataService.finish

| 语法   | public void finish() throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 结束持久化数据库的使用                              |

SaleDataService.find

| 语法   | public SalePO find(long id) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 按ID进行查找返回相应的持久化数据对象                      |

SaleDataService.insert

| 语法   | public void insert(SalePO po) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样的持久化数据对象在数据库中不存在                       |
| 后置条件 | 在数据库中增加一个持久化数据对象                         |

SaleDataService.delete

| 语法   | public void delete(SalePO po) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 在数据库中存在一个相同的持久化数据对象                      |
| 后置条件 | 在数据库中删除该持久化数据对象                          |

SaleDataService.update

| 语法   | public void update(SalePO po) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 在数据库中存在一个相同的持久化数据对象                      |
| 后置条件 | 更新数据库中该持久化数据对象的信息                        |

SaleDataService.init

| 语法   | public SalePO init() throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 初始化持久化数据库                                |

SaleDataService.finish

| 语法   | public void finish() throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 结束持久化数据库的使用                              |

CommodityDataService.find

| 语法   | public CommodityPO find(long id) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 按ID进行查找返回相应的持久化数据对象                      |

CommodityDataService.finds

| 语法   | public ArrayList<CommodityPO> finds(long id,String field) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 按ID进行查找返回相应的持久化数据对象                      |

CommodityDataService.insert

| 语法   | public void insert(CommodityPO po) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样的持久化数据对象在数据库中不存在                       |
| 后置条件 | 在数据库中增加一个持久化数据对象                         |

CommodityDataService.delete

| 语法   | public void delete(CommodityPO po) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 在数据库中存在一个相同的持久化数据对象                      |
| 后置条件 | 在数据库中删除该持久化数据对象                          |

CommodityDataService.update

| 语法   | public void update(CommodityPO po) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 在数据库中存在一个相同的持久化数据对象                      |
| 后置条件 | 更新数据库中该持久化数据对象的信息                        |

CommodityDataService.init

| 语法   | public CommodityPO init() throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 初始化持久化数据库                                |

CommodityDataService.finish

| 语法   | public void finish() throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 结束持久化数据库的使用                              |



LogDataService.find

| 语法   | public LogPO find(long id) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 按ID进行查找返回相应的持久化数据对象                      |



LogDataService.insert

| 语法   | public void insert(LogPO po) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样的持久化数据对象在数据库中不存在                       |
| 后置条件 | 在数据库中增加一个持久化数据对象                         |

LogDataService.delete

| 语法   | public void delete(LogPO po) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 在数据库中存在一个相同的持久化数据对象                      |
| 后置条件 | 在数据库中删除该持久化数据对象                          |

LogDataService.update

| 语法   | public void update(LogPO po) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 在数据库中存在一个相同的持久化数据对象                      |
| 后置条件 | 更新数据库中该持久化数据对象的信息                        |

LogDataService.init

| 语法   | public SalePO init() throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 初始化持久化数据库                                |

LogDataService.finish

| 语法   | public void finish() throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 结束持久化数据库的使用                              |



PromotionDataService.insert

| 语法   | public PromotionPO insert(PromotionPO pp) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样id的PO不存在                               |
| 后置条件 | 在数据库增加一个PO记录                             |

PromotionDataService.init

| 语法   | public viod init() throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 初始化持久化数据库                                |

PromotionDataService.finish

| 语法   | public viod finish() throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 结束持久化数据库的使用                              |

PromotionDataService.delete

| 语法   | public PromotionPO delete(PromotionPO pp) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 在数据库中存在同样id的PO                           |
| 后置条件 | 删除一个PO                                   |

TableDataService.findSalesDetailTable

| 语法   | public SalesDetailTablePO findSalesDetailTable(SalesDetailTablePO s) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 按条件返回相应的SalesDetailTablePO结果             |

TableDataService.findManageCourseTable

| 语法   | public ManageCourseTablePO findManageCourseTable(ManageCourseTablePO s) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 按条件返回相应的ManageCourseTablePO结果            |

TableDataService.findManageSituationTable

| 语法   | public ManageSituationTablePO findManageSituationTable(ManageSituationTablePO s) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 按条件返回相应的ManageSituationTablePO结果         |

TableDataService.red

| 语法   | public BillPO red(BillPO bp) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 在数据库中添加一个数量值改变的账单                        |

TableDataService.init

| 语法   | public void init() throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 初始化持久化数据库                                |

TableDataService.finish

| 语法   | public void finish() throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 结束持久化数据库的使用                              |

BillDataService.importBill

| 语法   | public importBillPO importBill (importBillPO ib) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样id的PO不存在                               |
| 后置条件 | 在数据库中增加一个PO记录                            |

BillDataService.exportBill

| 语法   | public exportBillPO exportBill (exportBillPO ib) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样id的PO不存在                               |
| 后置条件 | 在数据库中增加一个PO记录                            |

BillDataService.salesBill

| 语法   | public salesBillPO salesBill (salesBillPO ib) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样id的PO不存在                               |
| 后置条件 | 在数据库中增加一个PO记录                            |

BillDataService.salesExportBill

| 语法   | public salesExportBillPO salesExportBill(salesExportBillPO ib) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样id的PO不存在                               |
| 后置条件 | 在数据库中增加一个PO记录                            |

BillDataService.payBill

| 语法   | public payBillPO (payBillPO pb) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样id的PO不存在                               |
| 后置条件 | 在数据库中增加一个PO记录                            |

BillDataService.getBill

| 语法   | public getBillPO getBill(getBillPO gb) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样id的PO不存在                               |
| 后置条件 | 在数据库中增加一个PO记录                            |

BillDataService.giftBill

| 语法   | public giftBillPO giftBill(giftBillPO gb) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样id的PO不存在                               |
| 后置条件 | 在数据库中增加一个PO记录                            |

BillDataService.cashBill

| 语法   | public cashBillPO cashBill(cashBillPO cb) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样id的PO不存在                               |
| 后置条件 | 在数据库中增加一个PO记录                            |

BillDataService.overBill

| 语法   | public overBillPO overBill(overBillPO ob) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样id的PO不存在                               |
| 后置条件 | 在数据库中增加一个PO记录                            |

BillDataService.damageBill

| 语法   | public damageBillPO damageBill(damageBillPO db) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样id的PO不存在                               |
| 后置条件 | 在数据库中增加一个PO记录                            |

BillDataService.warnBill

| 语法   | public warnBillPO warnBill(warnBillPO wb) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样id的PO不存在                               |
| 后置条件 | 在数据库中增加一个PO记录                            |

BillDataService.delete

| 语法   | public BillPO delete(BillPO b) throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 同样id的PO存在                                |
| 后置条件 | 删除一个PO                                   |

BillDataService.init

| 语法   | public void init() throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 初始化持久化数据库                                |

BillDataService.finish

| 语法   | public void finish() throws RemoteException |
| ---- | ---------------------------------------- |
| 前置条件 | 无                                        |
| 后置条件 | 结束持久化数据库的使用                              |

## 6.信息视角

 ###6.1数据持久化对象

  系统的PO类就是对应的相关的实体类，在此只做简单的介绍。

  ·UserPO类包括用户的用户名、密码属性、权限。

  ·CommodityPO包含商品的编号、名称、型号、库存数量、进价、零售价、最近进价、最近零售价、库存均价、批次、批号、出厂日期。

  ·MemberPO包含编号、分类（进货商、销售商）、级别（五级，一级普通用户，五级VIP客户）、姓名、电话、地址、邮编、电子邮箱、应收额度、应收、应付、默认业务员。

  ·Sales/SalesExportPO包含单据编号、客户、业务员、操作员、仓库、出货商品清单、折让钱总额、折让、使用代金券金额、折让后总额、备注。

  ·PromotionPO包含促销类型、赠品、代金券、折让、商品组合。

  ·Import/ExportBillPo包含进货编号、供应商、仓库、操作员、入库商品列表、备注、总额合计

  ·AccountPO包含名称和余额。

  ·CommdityTablePO包含商品编号、名称、型号、数量、单价、金额、备注。

  ·In/OutBillPO包含单据编号、操作员、客户、转账列表、总额总汇。

  ·TransferPO包含银行账户、转账金额、备注。

  ·SalesDetailTablePO包含时间、商品名、型号、数量、单价、总额。

  ·ManagePO包含销售收入、商品报溢收入、成本调价收入、进货退货差价、代金券与实际收款差额收入、销售成本、商品类支出（商品报损、商品赠出）、折让后总收入-总支出。

   ·CashPO包含单据编号、操作员、银行账户、条目名、金额、备注、总额。

  持久化用户对象UserPO的定义如下所示。

​    public class UserPO implements Serializable {

​         int id;

​         String name;

​         String password;

​         

​         public UserPO (int i, String n, String p){

​              id = i;

​              name = n;

​              password = p;

​         }



​         public String getName(){

​              return name;

​         } 



​         public int getId(){

​              return id;

​         } 



​         public String getPassword(){

​              return password;

​         } 

   }

  ### 6.2Txt持久化格式

​    Txt数据保持格式以Commodity.txt为例。每行分别对应编号、名称、型号、库存数量、进价、零售价、最近进价、最近零售价。中间用“：”隔开。如下所示：

​    12345：白炽灯：x612：100：40：48：40：50

 ###  6.3数据库表

​    数据库中包括User表、Commodity表、Member表、Sales表、Promotion表、Account表、Sales/SalesExport表、Import/ExportBill表、CommdityTable表、In/OutBill表、Transfer表、SalesDetailTable表、Manage表、Cash表
